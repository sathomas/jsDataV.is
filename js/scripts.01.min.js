!function(t,e,i){"undefined"!=typeof module?module.exports=i(t,e):"function"==typeof define&&"object"==typeof define.amd?define(i):e[t]=i(t,e)}("bean",this,function(t,e){var i=window,n=e[t],o=/over|out/,s=/[^\.]*(?=\..*)\.|.*/,r=/\..*/,a="addEventListener",l="attachEvent",h="removeEventListener",c="detachEvent",u=document||{},d=u.documentElement||{},f=d[a],p=f?a:l,g=Array.prototype.slice,m=/click|mouse|menu|drag|drop/i,x=/^touch|^gesture/i,v={one:1},y=function(t,e,i){for(i=0;i<e.length;i++)t[e[i]]=1;return t}({},("click dblclick mouseup mousedown contextmenu mousewheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(f?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),b=function(){function t(t,e){for(;null!==(e=e.parentNode);)if(e===t)return!0;return!1}function e(e){var i=e.relatedTarget;return i?i!==this&&"xul"!==i.prefix&&!/document/.test(this.toString())&&!t(this,i):null===i}return{mouseenter:{base:"mouseover",condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),w=function(){var t="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),e=t.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),i=t.concat("char charCode key keyCode".split(" ")),n=t.concat("touches targetTouches changedTouches scale rotation".split(" ")),s="preventDefault",r=function(t){return function(){t[s]?t[s]():t.returnValue=!1}},a="stopPropagation",l=function(t){return function(){t[a]?t[a]():t.cancelBubble=!0}},h=function(t){return function(){t[s](),t[a](),t.stopped=!0}},c=function(t,e,i){var n,o;for(n=i.length;n--;)o=i[n],!(o in e)&&o in t&&(e[o]=t[o])};return function(f,p){var g={originalEvent:f,isNative:p};if(!f)return g;var v,y=f.type,b=f.target||f.srcElement;return g[s]=r(f),g[a]=l(f),g.stop=h(g),g.target=b&&3===b.nodeType?b.parentNode:b,p&&(-1!==y.indexOf("key")?(v=i,g.keyCode=f.which||f.keyCode):m.test(y)?(v=e,g.rightClick=3===f.which||2===f.button,g.pos={x:0,y:0},f.pageX||f.pageY?(g.clientX=f.pageX,g.clientY=f.pageY):(f.clientX||f.clientY)&&(g.clientX=f.clientX+u.body.scrollLeft+d.scrollLeft,g.clientY=f.clientY+u.body.scrollTop+d.scrollTop),o.test(y)&&(g.relatedTarget=f.relatedTarget||f[("mouseover"===y?"from":"to")+"Element"])):x.test(y)&&(v=n),c(f,g,v||t)),g}}(),M=function(t,e){return f||e||t!==u&&t!==i?t:d},k=function(){function t(t,e,i,n,o){this.element=t,this.type=e,this.handler=i,this.original=n,this.namespaces=o,this.custom=b[e],this.isNative=y[e]&&t[p],this.eventType=f||this.isNative?e:"propertychange",this.customType=!f&&!this.isNative&&e,this.target=M(t,this.isNative),this.eventSupport=this.target[p]}return t.prototype={inNamespaces:function(t){var e,i;if(!t)return!0;if(!this.namespaces)return!1;for(e=t.length;e--;)for(i=this.namespaces.length;i--;)if(t[e]===this.namespaces[i])return!0;return!1},matches:function(t,e,i){return!(this.element!==t||e&&this.original!==e||i&&this.handler!==i)}},t}(),S=function(){var t={},e=function(i,n,o,s,r){if(n&&"*"!==n){var a=0,l,h=t["$"+n],c="*"===i;if(!h)return;for(l=h.length;l>a;a++)if((c||h[a].matches(i,o,s))&&!r(h[a],h,a,n))return}else for(var u in t)"$"===u.charAt(0)&&e(i,u.substr(1),o,s,r)},i=function(e,i,n){var o,s=t["$"+i];if(s)for(o=s.length;o--;)if(s[o].matches(e,n,null))return!0;return!1},n=function(t,i,n){var o=[];return e(t,i,n,null,function(t){return o.push(t)}),o},o=function(e){return(t["$"+e.type]||(t["$"+e.type]=[])).push(e),e},s=function(i){e(i.element,i.type,null,i.handler,function(e,i,n){return i.splice(n,1),0===i.length&&delete t["$"+e.type],!1})},r=function(){var e,i=[];for(e in t)"$"===e.charAt(0)&&(i=i.concat(t[e]));return i};return{has:i,get:n,put:o,del:s,entries:r}}(),T=f?function(t,e,i,n){t[n?a:h](e,i,!1)}:function(t,e,i,n,o){o&&n&&null===t["_on"+o]&&(t["_on"+o]=0),t[n?l:c]("on"+e,i)},F=function(t,e,n){return function(o){return o=w(o||((this.ownerDocument||this.document||this).parentWindow||i).event,!0),e.apply(t,[o].concat(n))}},A=function(t,e,n,o,s,r){return function(a){(o?o.apply(this,arguments):f?!0:a&&a.propertyName==="_on"+n||!a)&&(a&&(a=w(a||((this.ownerDocument||this.document||this).parentWindow||i).event,r)),e.apply(t,!a||s&&0!==s.length?g.call(arguments,a?0:1).concat(s):arguments))}},O=function(t,e,i,n,o){return function(){t(e,i,o),n.apply(this,arguments)}},C=function(t,e,i,n){var o,s,a,l=e&&e.replace(r,""),h=S.get(t,l,i);for(o=0,s=h.length;s>o;o++)h[o].inNamespaces(n)&&((a=h[o]).eventSupport&&T(a.target,a.eventType,a.handler,!1,a.type),S.del(a))},W=function(t,e,i,n,o){var a,l=e.replace(r,""),h=e.replace(s,"").split(".");return S.has(t,l,i)?t:("unload"===l&&(i=O(C,t,l,i,n)),b[l]&&(b[l].condition&&(i=A(t,i,l,b[l].condition,!0)),l=b[l].base||l),a=S.put(new k(t,l,i,n,h[0]&&h)),a.handler=a.isNative?F(t,a.handler,o):A(t,a.handler,l,!1,o,!1),void(a.eventSupport&&T(a.target,a.eventType,a.handler,!0,a.customType)))},z=function(t,e,$){return function(i){var n,o,s="string"==typeof t?$(t,this):t;for(n=i.target;n&&n!==this;n=n.parentNode)for(o=s.length;o--;)if(s[o]===n)return e.apply(n,arguments)}},I=function(t,e,i){var n,o,a,l,h,c=C,u=e&&"string"==typeof e;if(u&&e.indexOf(" ")>0){for(e=e.split(" "),h=e.length;h--;)I(t,e[h],i);return t}if(a=u&&e.replace(r,""),a&&b[a]&&(a=b[a].type),!e||u)(l=u&&e.replace(s,""))&&(l=l.split(".")),c(t,a,i,l);else if("function"==typeof e)c(t,null,e);else for(n in e)e.hasOwnProperty(n)&&I(t,n,e[n]);return t},P=function(t,e,i,n,$){var o,s,r,a,l=i,h=i&&"string"==typeof i;if(e&&!i&&"object"==typeof e)for(o in e)e.hasOwnProperty(o)&&P.apply(this,[t,o,e[o]]);else for(a=arguments.length>3?g.call(arguments,3):[],s=(h?i:e).split(" "),h&&(i=z(e,l=n,$))&&(a=g.call(a,1)),this===v&&(i=O(I,t,e,i,l)),r=s.length;r--;)W(t,s[r],i,l,a);return t},E=function(){return P.apply(v,arguments)},H=f?function(t,e,n){var o=u.createEvent(t?"HTMLEvents":"UIEvents");o[t?"initEvent":"initUIEvent"](e,!0,!0,i,1),n.dispatchEvent(o)}:function(t,e,i){i=M(i,t),t?i.fireEvent("on"+e,u.createEventObject()):i["_on"+e]++},R=function(t,e,i){var n,o,a,l,h,c=e.split(" ");for(n=c.length;n--;)if(e=c[n].replace(r,""),(l=c[n].replace(s,""))&&(l=l.split(".")),l||i||!t[p])for(h=S.get(t,e),i=[!1].concat(i),o=0,a=h.length;a>o;o++)h[o].inNamespaces(l)&&h[o].handler.apply(t,i);else H(y[e],e,t);return t},_=function(t,e,i){for(var n=0,o=S.get(e,i),s=o.length;s>n;n++)o[n].original&&P(t,o[n].type,o[n].original);return t},D={add:P,one:E,remove:I,clone:_,fire:R,noConflict:function(){return e[t]=n,this}};if(i[l]){var L=function(){var t,e=S.entries();for(t in e)e[t].type&&"unload"!==e[t].type&&I(e[t].element,e[t].type);i[c]("onunload",L),i.CollectGarbage&&i.CollectGarbage()};i[l]("onunload",L)}return D}),function(){var t=this,e=t._,i={},n=Array.prototype,o=Object.prototype,s=Function.prototype,r=n.slice,a=n.unshift,l=o.toString,h=o.hasOwnProperty,c=n.forEach,u=n.map,d=n.reduce,f=n.reduceRight,p=n.filter,g=n.every,m=n.some,x=n.indexOf,v=n.lastIndexOf,y=Array.isArray,b=Object.keys,w=s.bind,M=function(t){return new A(t)};"undefined"!=typeof module&&module.exports?(module.exports=M,M._=M):t._=M,M.VERSION="1.1.7";var k=M.each=M.forEach=function(t,e,n){if(null!=t)if(c&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length){for(var o=0,s=t.length;s>o;o++)if(o in t&&e.call(n,t[o],o,t)===i)return}else for(var r in t)if(h.call(t,r)&&e.call(n,t[r],r,t)===i)return};M.map=function(t,e,i){var n=[];return null==t?n:u&&t.map===u?t.map(e,i):(k(t,function(t,o,s){n[n.length]=e.call(i,t,o,s)}),n)},M.reduce=M.foldl=M.inject=function(t,e,i,n){var o=void 0!==i;if(null==t&&(t=[]),d&&t.reduce===d)return n&&(e=M.bind(e,n)),o?t.reduce(e,i):t.reduce(e);if(k(t,function(t,s,r){o?i=e.call(n,i,t,s,r):(i=t,o=!0)}),!o)throw new TypeError("Reduce of empty array with no initial value");return i},M.reduceRight=M.foldr=function(t,e,i,n){if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=M.bind(e,n)),void 0!==i?t.reduceRight(e,i):t.reduceRight(e);var o=(M.isArray(t)?t.slice():M.toArray(t)).reverse();return M.reduce(o,e,i,n)},M.find=M.detect=function(t,e,i){var n;return S(t,function(t,o,s){return e.call(i,t,o,s)?(n=t,!0):void 0}),n},M.filter=M.select=function(t,e,i){var n=[];return null==t?n:p&&t.filter===p?t.filter(e,i):(k(t,function(t,o,s){e.call(i,t,o,s)&&(n[n.length]=t)}),n)},M.reject=function(t,e,i){var n=[];return null==t?n:(k(t,function(t,o,s){e.call(i,t,o,s)||(n[n.length]=t)}),n)},M.every=M.all=function(t,e,n){var o=!0;return null==t?o:g&&t.every===g?t.every(e,n):(k(t,function(t,s,r){return(o=o&&e.call(n,t,s,r))?void 0:i}),o)};var S=M.some=M.any=function(t,e,n){e=e||M.identity;var o=!1;return null==t?o:m&&t.some===m?t.some(e,n):(k(t,function(t,s,r){return(o|=e.call(n,t,s,r))?i:void 0}),!!o)};M.include=M.contains=function(t,e){var i=!1;return null==t?i:x&&t.indexOf===x?-1!=t.indexOf(e):(S(t,function(t){return(i=t===e)?!0:void 0}),i)},M.invoke=function(t,e){var i=r.call(arguments,2);return M.map(t,function(t){return(e.call?e||t:t[e]).apply(t,i)})},M.pluck=function(t,e){return M.map(t,function(t){return t[e]})},M.max=function(t,e,i){if(!e&&M.isArray(t))return Math.max.apply(Math,t);var n={computed:-1/0};return k(t,function(t,o,s){var r=e?e.call(i,t,o,s):t;r>=n.computed&&(n={value:t,computed:r})}),n.value},M.min=function(t,e,i){if(!e&&M.isArray(t))return Math.min.apply(Math,t);var n={computed:1/0};return k(t,function(t,o,s){var r=e?e.call(i,t,o,s):t;r<n.computed&&(n={value:t,computed:r})}),n.value},M.sortBy=function(t,e,i){return M.pluck(M.map(t,function(t,n,o){return{value:t,criteria:e.call(i,t,n,o)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;return n>i?-1:i>n?1:0}),"value")},M.groupBy=function(t,e){var i={};return k(t,function(t,n){var o=e(t,n);(i[o]||(i[o]=[])).push(t)}),i},M.sortedIndex=function(t,e,i){i||(i=M.identity);for(var n=0,o=t.length;o>n;){var s=n+o>>1;i(t[s])<i(e)?n=s+1:o=s}return n},M.toArray=function(t){return t?t.toArray?t.toArray():M.isArray(t)?r.call(t):M.isArguments(t)?r.call(t):M.values(t):[]},M.size=function(t){return M.toArray(t).length},M.first=M.head=function(t,e,i){return null==e||i?t[0]:r.call(t,0,e)},M.rest=M.tail=function(t,e,i){return r.call(t,null==e||i?1:e)},M.last=function(t){return t[t.length-1]},M.compact=function(t){return M.filter(t,function(t){return!!t})},M.flatten=function(t){return M.reduce(t,function(t,e){return M.isArray(e)?t.concat(M.flatten(e)):(t[t.length]=e,t)},[])},M.without=function(t){return M.difference(t,r.call(arguments,1))},M.uniq=M.unique=function(t,e){return M.reduce(t,function(t,i,n){return 0!=n&&(e===!0?M.last(t)==i:M.include(t,i))||(t[t.length]=i),t},[])},M.union=function(){return M.uniq(M.flatten(arguments))},M.intersection=M.intersect=function(t){var e=r.call(arguments,1);return M.filter(M.uniq(t),function(t){return M.every(e,function(e){return M.indexOf(e,t)>=0})})},M.difference=function(t,e){return M.filter(t,function(t){return!M.include(e,t)})},M.zip=function(){for(var t=r.call(arguments),e=M.max(M.pluck(t,"length")),i=new Array(e),n=0;e>n;n++)i[n]=M.pluck(t,""+n);return i},M.indexOf=function(t,e,i){if(null==t)return-1;var n,o;if(i)return n=M.sortedIndex(t,e),t[n]===e?n:-1;if(x&&t.indexOf===x)return t.indexOf(e);for(n=0,o=t.length;o>n;n++)if(t[n]===e)return n;return-1},M.lastIndexOf=function(t,e){if(null==t)return-1;if(v&&t.lastIndexOf===v)return t.lastIndexOf(e);for(var i=t.length;i--;)if(t[i]===e)return i;return-1},M.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),o=0,s=new Array(n);n>o;)s[o++]=t,t+=i;return s},M.bind=function(t,e){if(t.bind===w&&w)return w.apply(t,r.call(arguments,1));var i=r.call(arguments,2);return function(){return t.apply(e,i.concat(r.call(arguments)))}},M.bindAll=function(t){var e=r.call(arguments,1);return 0==e.length&&(e=M.functions(t)),k(e,function(e){t[e]=M.bind(t[e],t)}),t},M.memoize=function(t,e){var i={};return e||(e=M.identity),function(){var n=e.apply(this,arguments);return h.call(i,n)?i[n]:i[n]=t.apply(this,arguments)}},M.delay=function(t,e){var i=r.call(arguments,2);return setTimeout(function(){return t.apply(t,i)},e)},M.defer=function(t){return M.delay.apply(M,[t,1].concat(r.call(arguments,1)))};var T=function(t,e,i){var n;return function(){var o=this,s=arguments,r=function(){n=null,t.apply(o,s)};i&&clearTimeout(n),(i||!n)&&(n=setTimeout(r,e))}};M.throttle=function(t,e){return T(t,e,!1)},M.debounce=function(t,e){return T(t,e,!0)},M.once=function(t){var e=!1,i;return function(){return e?i:(e=!0,i=t.apply(this,arguments))}},M.wrap=function(t,e){return function(){var i=[t].concat(r.call(arguments));return e.apply(this,i)}},M.compose=function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},M.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},M.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)h.call(t,i)&&(e[e.length]=i);return e},M.values=function(t){return M.map(t,M.identity)},M.functions=M.methods=function(t){var e=[];for(var i in t)M.isFunction(t[i])&&e.push(i);return e.sort()},M.extend=function(t){return k(r.call(arguments,1),function(e){for(var i in e)void 0!==e[i]&&(t[i]=e[i])}),t},M.defaults=function(t){return k(r.call(arguments,1),function(e){for(var i in e)null==t[i]&&(t[i]=e[i])}),t},M.clone=function(t){return M.isArray(t)?t.slice():M.extend({},t)},M.tap=function(t,e){return e(t),t},M.isEqual=function(t,e){if(t===e)return!0;var i=typeof t,n=typeof e;if(i!=n)return!1;if(t==e)return!0;if(!t&&e||t&&!e)return!1;if(t._chain&&(t=t._wrapped),e._chain&&(e=e._wrapped),t.isEqual)return t.isEqual(e);if(e.isEqual)return e.isEqual(t);if(M.isDate(t)&&M.isDate(e))return t.getTime()===e.getTime();if(M.isNaN(t)&&M.isNaN(e))return!1;if(M.isRegExp(t)&&M.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline;if("object"!==i)return!1;if(t.length&&t.length!==e.length)return!1;var o=M.keys(t),s=M.keys(e);if(o.length!=s.length)return!1;for(var r in t)if(!(r in e&&M.isEqual(t[r],e[r])))return!1;return!0},M.isEmpty=function(t){if(M.isArray(t)||M.isString(t))return 0===t.length;for(var e in t)if(h.call(t,e))return!1;return!0},M.isElement=function(t){return!(!t||1!=t.nodeType)},M.isArray=y||function(t){return"[object Array]"===l.call(t)},M.isObject=function(t){return t===Object(t)},M.isArguments=function(t){return!(!t||!h.call(t,"callee"))},M.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},M.isString=function(t){return!!(""===t||t&&t.charCodeAt&&t.substr)},M.isNumber=function(t){return!!(0===t||t&&t.toExponential&&t.toFixed)},M.isNaN=function(t){return t!==t},M.isBoolean=function(t){return t===!0||t===!1},M.isDate=function(t){return!!(t&&t.getTimezoneOffset&&t.setUTCFullYear)},M.isRegExp=function(t){return!(!(t&&t.test&&t.exec)||!t.ignoreCase&&t.ignoreCase!==!1)},M.isNull=function(t){return null===t},M.isUndefined=function(t){return void 0===t},M.noConflict=function(){return t._=e,this},M.identity=function(t){return t},M.times=function(t,e,i){for(var n=0;t>n;n++)e.call(i,n)},M.mixin=function(t){k(M.functions(t),function(e){C(e,M[e]=t[e])})};var F=0;M.uniqueId=function(t){var e=F++;return t?t+e:e},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},M.template=function(t,e){var i=M.templateSettings,n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(i.interpolate,function(t,e){return"',"+e.replace(/\\'/g,"'")+",'"}).replace(i.evaluate||null,function(t,e){return"');"+e.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",o=new Function("obj",n);return e?o(e):o};var A=function(t){this._wrapped=t};M.prototype=A.prototype;var O=function(t,e){return e?M(t).chain():t},C=function(t,e){A.prototype[t]=function(){var t=r.call(arguments);return a.call(t,this._wrapped),O(e.apply(M,t),this._chain)}};M.mixin(M),k(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];A.prototype[t]=function(){return e.apply(this._wrapped,arguments),O(this._wrapped,this._chain)}}),k(["concat","join","slice"],function(t){var e=n[t];A.prototype[t]=function(){return O(e.apply(this._wrapped,arguments),this._chain)}}),A.prototype.chain=function(){return this._chain=!0,this},A.prototype.value=function(){return this._wrapped}}(),function(){var t=this,e=this.Flotr,i;i={_:_,bean:bean,isIphone:/iphone/i.test(navigator.userAgent),isIE:-1!=navigator.appVersion.indexOf("MSIE")?parseFloat(navigator.appVersion.split("MSIE")[1]):!1,graphTypes:{},plugins:{},addType:function(t,e){i.graphTypes[t]=e,i.defaultOptions[t]=e.options||{},i.defaultOptions.defaultType=i.defaultOptions.defaultType||t},addPlugin:function(t,e){i.plugins[t]=e,i.defaultOptions[t]=e.options||{}},draw:function(t,e,n,o){return new(o=o||i.Graph)(t,e,n)},merge:function(t,e){var n,o,s=e||{};for(n in t)o=t[n],s[n]=o&&"object"==typeof o?o.constructor===Array?this._.clone(o):o.constructor===RegExp||this._.isElement(o)||o.jquery?o:i.merge(o,e?e[n]:void 0):o;return s},clone:function(t){return i.merge(t,{})},getTickSize:function(t,e,n,o){var s=(n-e)/t,r=i.getMagnitude(s),a=10,l=s/r;return 1.5>l?a=1:2.25>l?a=2:3>l?a=0===o?2:2.5:7.5>l&&(a=5),a*r},defaultTickFormatter:function(t,e){return t+""},defaultTrackFormatter:function(t){return"("+t.x+", "+t.y+")"},engineeringNotation:function(t,e,i){var n=["Y","Z","E","P","T","G","M","k",""],o=["y","z","a","f","p","n","µ","m",""],s=n.length;if(i=i||1e3,e=Math.pow(10,e||2),0===t)return 0;if(t>1)for(;s--&&t>=i;)t/=i;else for(n=o,s=n.length;s--&&1>t;)t*=i;return Math.round(t*e)/e+n[s]},getMagnitude:function(t){return Math.pow(10,Math.floor(Math.log(t)/Math.LN10))},toPixel:function(t){return Math.floor(t)+.5},toRad:function(t){return-t*(Math.PI/180)},floorInBase:function(t,e){return e*Math.floor(t/e)},drawText:function(t,e,n,o,s){return t.fillText?(s=this._.extend({size:i.defaultOptions.fontSize,color:"#000000",textAlign:"left",textBaseline:"bottom",weight:1,angle:0},s),t.save(),t.translate(n,o),t.rotate(s.angle),t.fillStyle=s.color,t.font=(s.weight>1?"bold ":"")+1.3*s.size+"px sans-serif",t.textAlign=s.textAlign,t.textBaseline=s.textBaseline,t.fillText(e,0,0),void t.restore()):void t.drawText(e,n,o,s)},getBestTextAlign:function(t,e){return e=e||{textAlign:"center",textBaseline:"middle"},t+=i.getTextAngleFromAlign(e),Math.abs(Math.cos(t))>.01&&(e.textAlign=Math.cos(t)>0?"right":"left"),Math.abs(Math.sin(t))>.01&&(e.textBaseline=Math.sin(t)>0?"top":"bottom"),e},alignTable:{"right middle":0,"right top":Math.PI/4,"center top":Math.PI/2,"left top":3*(Math.PI/4),"left middle":Math.PI,"left bottom":-3*(Math.PI/4),"center bottom":-Math.PI/2,"right bottom":-Math.PI/4,"center middle":0},getTextAngleFromAlign:function(t){return i.alignTable[t.textAlign+" "+t.textBaseline]||0},noConflict:function(){return t.Flotr=e,this}},t.Flotr=i}(),Flotr.defaultOptions={colors:["#00A8F0","#C0D800","#CB4B4B","#4DA74D","#9440ED"],ieBackgroundColor:"#FFFFFF",title:null,subtitle:null,shadowSize:4,defaultType:null,HtmlText:!0,fontColor:"#545454",fontSize:7.5,resolution:1,parseFloat:!0,preventDefault:!0,xaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:0,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,mode:"normal",timeFormat:null,timeMode:"UTC",timeUnit:"millisecond",scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},x2axis:{},yaxis:{ticks:null,minorTicks:null,showLabels:!0,showMinorLabels:!1,labelsAngle:0,title:null,titleAngle:90,noTicks:5,minorTickFreq:null,tickFormatter:Flotr.defaultTickFormatter,tickDecimals:null,min:null,max:null,autoscale:!1,autoscaleMargin:0,color:null,scaling:"linear",base:Math.E,titleAlign:"center",margin:!0},y2axis:{titleAngle:270},grid:{color:"#545454",backgroundColor:null,backgroundImage:null,watermarkAlpha:.4,tickColor:"#DDDDDD",labelMargin:3,verticalLines:!0,minorVerticalLines:null,horizontalLines:!0,minorHorizontalLines:null,outlineWidth:1,outline:"nsew",circular:!1},mouse:{track:!1,trackAll:!1,position:"se",relative:!1,trackFormatter:Flotr.defaultTrackFormatter,margin:5,lineColor:"#FF3F19",trackDecimals:1,sensibility:2,trackY:!0,radius:3,fillColor:null,fillOpacity:.4}},function(){function t(t,e,i,n){this.rgba=["r","g","b","a"];for(var o=4;-1<--o;)this[this.rgba[o]]=arguments[o]||(3==o?1:0);this.normalize()}var e=Flotr._,i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};t.prototype={scale:function(t,i,n,o){for(var s=4;-1<--s;)e.isUndefined(arguments[s])||(this[this.rgba[s]]*=arguments[s]);return this.normalize()},alpha:function(t){return e.isUndefined(t)||e.isNull(t)||(this.a=t),this.normalize()},clone:function(){return new t(this.r,this.b,this.g,this.a)},limit:function(t,e,i){return Math.max(Math.min(t,i),e)},normalize:function(){var t=this.limit;return this.r=t(parseInt(this.r,10),0,255),this.g=t(parseInt(this.g,10),0,255),this.b=t(parseInt(this.b,10),0,255),this.a=t(this.a,0,1),this},distance:function(e){if(e){e=new t.parse(e);for(var i=0,n=3;-1<--n;)i+=Math.abs(this[this.rgba[n]]-e[this.rgba[n]]);return i}},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},contrast:function(){var t=1-(.299*this.r+.587*this.g+.114*this.b)/255;return.5>t?"#000000":"#ffffff"}},e.extend(t,{parse:function(e){if(e instanceof t)return e;var n;if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return new t(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return new t(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return new t(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return new t(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return new t(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return new t(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));var o=(e+"").replace(/^\s*([\S\s]*?)\s*$/,"$1").toLowerCase();return"transparent"==o?new t(255,255,255,0):(n=i[o])?new t(n[0],n[1],n[2]):new t(0,0,0,0)},processColor:function(i,n){var o=n.opacity;if(!i)return"rgba(0, 0, 0, 0)";if(i instanceof t)return i.alpha(o).toString();if(e.isString(i))return t.parse(i).alpha(o).toString();var s=i.colors?i:{colors:i};if(!n.ctx)return e.isArray(s.colors)?t.parse(e.isArray(s.colors[0])?s.colors[0][1]:s.colors[0]).alpha(o).toString():"rgba(0, 0, 0, 0)";s=e.extend({start:"top",end:"bottom"},s),/top/i.test(s.start)&&(n.x1=0),/left/i.test(s.start)&&(n.y1=0),/bottom/i.test(s.end)&&(n.x2=0),/right/i.test(s.end)&&(n.y2=0);var r,a,l,h=n.ctx.createLinearGradient(n.x1,n.y1,n.x2,n.y2);for(r=0;r<s.colors.length;r++)a=s.colors[r],e.isArray(a)?(l=a[0],a=a[1]):l=r/(s.colors.length-1),h.addColorStop(l,t.parse(a).alpha(o));return h}}),Flotr.Color=t}(),Flotr.Date={set:function(t,e,i,n){i=i||"UTC",e="set"+("UTC"===i?"UTC":"")+e,t[e](n)},get:function(t,e,i){return i=i||"UTC",e="get"+("UTC"===i?"UTC":"")+e,t[e]()},format:function(t,e,i){function n(t){return t+="",1==t.length?"0"+t:t}if(t){for(var o=this.get,s={h:o(t,"Hours",i).toString(),H:n(o(t,"Hours",i)),M:n(o(t,"Minutes",i)),S:n(o(t,"Seconds",i)),s:o(t,"Milliseconds",i),d:o(t,"Date",i).toString(),m:(o(t,"Month",i)+1).toString(),y:o(t,"FullYear",i).toString(),b:Flotr.Date.monthNames[o(t,"Month",i)]},r=[],a,l=!1,h=0;h<e.length;++h)a=e.charAt(h),l?(r.push(s[a]||a),l=!1):"%"==a?l=!0:r.push(a);return r.join("")}},getFormat:function(t,e){var i=Flotr.Date.timeUnits;return t<i.second?"%h:%M:%S.%s":t<i.minute?"%h:%M:%S":t<i.day?e<2*i.day?"%h:%M":"%b %d %h:%M":t<i.month?"%b %d":t<i.year?e<i.year?"%b":"%b %y":"%y"},formatter:function(t,e){var i=e.options,n=Flotr.Date.timeUnits[i.timeUnit],o=new Date(t*n);if(e.options.timeFormat)return Flotr.Date.format(o,i.timeFormat,i.timeMode);var s=(e.max-e.min)*n,r=e.tickSize*Flotr.Date.timeUnits[e.tickUnit];return Flotr.Date.format(o,Flotr.Date.getFormat(r,s),i.timeMode)},generator:function(t){function e(t){i(x,t,a,Flotr.floorInBase(n(x,t,a),f))}var i=this.set,n=this.get,o=this.timeUnits,s=this.spec,r=t.options,a=r.timeMode,l=o[r.timeUnit],h=t.min*l,c=t.max*l,u=(c-h)/r.noTicks,d=[],f=t.tickSize,p,g,m;for(g=r.tickFormatter===Flotr.defaultTickFormatter?this.formatter:r.tickFormatter,m=0;m<s.length-1;++m){var x=s[m][0]*o[s[m][1]];if(u<(x+s[m+1][0]*o[s[m+1][1]])/2&&x>=f)break}f=s[m][0],p=s[m][1],"year"==p&&(f=Flotr.getTickSize(r.noTicks*o.year,h,c,0),.5==f&&(p="month",f=6)),t.tickUnit=p,t.tickSize=f;var v=f*o[p];switch(x=new Date(h),p){case"millisecond":e("Milliseconds");break;case"second":e("Seconds");break;case"minute":e("Minutes");break;case"hour":e("Hours");break;case"month":e("Month");break;case"year":e("FullYear")}v>=o.second&&i(x,"Milliseconds",a,0),v>=o.minute&&i(x,"Seconds",a,0),v>=o.hour&&i(x,"Minutes",a,0),v>=o.day&&i(x,"Hours",a,0),v>=4*o.day&&i(x,"Date",a,1),v>=o.year&&i(x,"Month",a,0);var y=0,b=0/0,w;do if(w=b,b=x.getTime(),d.push({v:b/l,label:g(b/l,t)}),"month"==p)if(1>f){i(x,"Date",a,1);var M=x.getTime();i(x,"Month",a,n(x,"Month",a)+1);var k=x.getTime();x.setTime(b+y*o.hour+(k-M)*f),y=n(x,"Hours",a),i(x,"Hours",a,0)}else i(x,"Month",a,n(x,"Month",a)+f);else"year"==p?i(x,"FullYear",a,n(x,"FullYear",a)+f):x.setTime(b+v);while(c>b&&b!=w);return d},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:31556952e3},spec:[[1,"millisecond"],[20,"millisecond"],[50,"millisecond"],[100,"millisecond"],[200,"millisecond"],[500,"millisecond"],[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(){function t(t){return t&&t.jquery?t[0]:t}var e=Flotr._;Flotr.DOM={addClass:function(i,n){i=t(i);var o=i.className?i.className:"";e.include(o.split(/\s+/g),n)||(i.className=(o?o+" ":"")+n)},create:function(t){return document.createElement(t)},node:function(t){var e=Flotr.DOM.create("div"),i;return e.innerHTML=t,i=e.children[0],e.innerHTML="",i},empty:function(e){e=t(e),e.innerHTML=""},remove:function(e){e=t(e),e.parentNode.removeChild(e)},hide:function(e){e=t(e),Flotr.DOM.setStyles(e,{display:"none"})},insert:function(i,n){i=t(i),e.isString(n)?i.innerHTML+=n:e.isElement(n)&&i.appendChild(n)},opacity:function(e,i){e=t(e),e.style.opacity=i},position:function(e,i){return e=t(e),e.offsetParent?(i=this.position(e.offsetParent),i.left+=e.offsetLeft,i.top+=e.offsetTop,i):{left:e.offsetLeft||0,top:e.offsetTop||0}},removeClass:function(i,n){var o=i.className?i.className:"";i=t(i),i.className=e.filter(o.split(/\s+/g),function(t){return t!=n?!0:void 0}).join(" ")},setStyles:function(i,n){i=t(i),e.each(n,function(t,e){i.style[e]=t})},show:function(e){e=t(e),Flotr.DOM.setStyles(e,{display:""})},size:function(e){return e=t(e),{height:e.offsetHeight,width:e.offsetWidth}}}}(),function(){var t=Flotr,e=t.bean;t.EventAdapter={observe:function(t,i,n){return e.add(t,i,n),this},fire:function(t,i,n){return e.fire(t,i,n),"undefined"!=typeof Prototype&&Event.fire(t,i,n),this},stopObserving:function(t,i,n){return e.remove(t,i,n),this},eventPointer:function(e){if(!t._.isUndefined(e.touches)&&e.touches.length>0)return{x:e.touches[0].pageX,y:e.touches[0].pageY};if(!t._.isUndefined(e.changedTouches)&&e.changedTouches.length>0)return{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};if(e.pageX||e.pageY)return{x:e.pageX,y:e.pageY};if(e.clientX||e.clientY){var i=document,n=i.body,o=i.documentElement;return{x:e.clientX+n.scrollLeft+o.scrollLeft,y:e.clientY+n.scrollTop+o.scrollTop}}}}}(),function(){var t=Flotr,e=t.DOM,i=t._,n=function(t){this.o=t};n.prototype={dimensions:function(t,e,i,n){return t?this.o.html?this.html(t,this.o.element,i,n):this.canvas(t,e):{width:0,height:0}},canvas:function(e,i){if(this.o.textEnabled){i=i||{};var n=this.measureText(e,i),o=n.width,s=i.size||t.defaultOptions.fontSize,r=i.angle||0,a=Math.cos(r),l=Math.sin(r),h=2,c=6,u;return u={width:Math.abs(a*o)+Math.abs(l*s)+h,height:Math.abs(l*o)+Math.abs(a*s)+c}}},html:function(t,i,n,o){var s=e.create("div");return e.setStyles(s,{position:"absolute",top:"-10000px"}),e.insert(s,'<div style="'+n+'" class="'+o+' flotr-dummy-div">'+t+"</div>"),e.insert(this.o.element,s),e.size(s)},measureText:function(e,n){var o=this.o.ctx,s;return!o.fillText||t.isIphone&&o.measure?{width:o.measure(e,n)}:(n=i.extend({size:t.defaultOptions.fontSize,weight:1,angle:0},n),o.save(),o.font=(n.weight>1?"bold ":"")+1.3*n.size+"px sans-serif",s=o.measureText(e),o.restore(),s)}},Flotr.Text=n}(),function(){function t(t,e,n){return i.observe.apply(this,arguments),this._handles.push(arguments),this}var e=Flotr.DOM,i=Flotr.EventAdapter,n=Flotr._,o=Flotr;Graph=function(t,e,s){this._setEl(t),this._initMembers(),this._initPlugins(),i.fire(this.el,"flotr:beforeinit",[this]),this.data=e,this.series=o.Series.getSeries(e),this._initOptions(s),this._initGraphTypes(),this._initCanvas(),this._text=new o.Text({element:this.el,ctx:this.ctx,html:this.options.HtmlText,textEnabled:this.textEnabled}),i.fire(this.el,"flotr:afterconstruct",[this]),this._initEvents(),this.findDataRanges(),this.calculateSpacing(),this.draw(n.bind(function(){i.fire(this.el,"flotr:afterinit",[this])},this))},Graph.prototype={destroy:function(){i.fire(this.el,"flotr:destroy"),n.each(this._handles,function(t){i.stopObserving.apply(this,t)}),this._handles=[],this.el.graph=null},observe:t,_observe:t,processColor:function(t,e){var i={x1:0,y1:0,x2:this.plotWidth,y2:this.plotHeight,opacity:1,ctx:this.ctx};
return n.extend(i,e),o.Color.processColor(t,i)},findDataRanges:function(){var t=this.axes,e,i,s;n.each(this.series,function(t){s=t.getRange(),s&&(e=t.xaxis,i=t.yaxis,e.datamin=Math.min(s.xmin,e.datamin),e.datamax=Math.max(s.xmax,e.datamax),i.datamin=Math.min(s.ymin,i.datamin),i.datamax=Math.max(s.ymax,i.datamax),e.used=e.used||s.xused,i.used=i.used||s.yused)},this),t.x.used||t.x2.used||(t.x.used=!0),t.y.used||t.y2.used||(t.y.used=!0),n.each(t,function(t){t.calculateRange()});var r=n.keys(o.graphTypes),a=!1;n.each(this.series,function(t){t.hide||(n.each(r,function(e){t[e]&&t[e].show&&(this.extendRange(e,t),a=!0)},this),a||this.extendRange(this.options.defaultType,t))},this)},extendRange:function(t,e){this[t].extendRange&&this[t].extendRange(e,e.data,e[t],this[t]),this[t].extendYRange&&this[t].extendYRange(e.yaxis,e.data,e[t],this[t]),this[t].extendXRange&&this[t].extendXRange(e.xaxis,e.data,e[t],this[t])},calculateSpacing:function(){var t=this.axes,e=this.options,i=this.series,o=e.grid.labelMargin,s=this._text,r=t.x,a=t.x2,l=t.y,h=t.y2,c=e.grid.outlineWidth,u,d,f,p;for(n.each(t,function(t){t.calculateTicks(),t.calculateTextDimensions(s,e)}),p=s.dimensions(e.title,{size:1.5*e.fontSize},"font-size:1em;font-weight:bold;","flotr-title"),this.titleHeight=p.height,p=s.dimensions(e.subtitle,{size:e.fontSize},"font-size:smaller;","flotr-subtitle"),this.subtitleHeight=p.height,d=0;d<e.length;++d)i[d].points.show&&(c=Math.max(c,i[d].points.radius+i[d].points.lineWidth/2));var g=this.plotOffset;r.options.margin===!1?(g.bottom=0,g.top=0):r.options.margin===!0?(g.bottom+=(e.grid.circular?0:r.used&&r.options.showLabels?r.maxLabel.height+o:0)+(r.used&&r.options.title?r.titleSize.height+o:0)+c,g.top+=(e.grid.circular?0:a.used&&a.options.showLabels?a.maxLabel.height+o:0)+(a.used&&a.options.title?a.titleSize.height+o:0)+this.subtitleHeight+this.titleHeight+c):(g.bottom=r.options.margin,g.top=r.options.margin),l.options.margin===!1?(g.left=0,g.right=0):l.options.margin===!0?(g.left+=(e.grid.circular?0:l.used&&l.options.showLabels?l.maxLabel.width+o:0)+(l.used&&l.options.title?l.titleSize.width+o:0)+c,g.right+=(e.grid.circular?0:h.used&&h.options.showLabels?h.maxLabel.width+o:0)+(h.used&&h.options.title?h.titleSize.width+o:0)+c):(g.left=l.options.margin,g.right=l.options.margin),g.top=Math.floor(g.top),this.plotWidth=this.canvasWidth-g.left-g.right,this.plotHeight=this.canvasHeight-g.bottom-g.top,r.length=a.length=this.plotWidth,l.length=h.length=this.plotHeight,l.offset=h.offset=this.plotHeight,r.setScale(),a.setScale(),l.setScale(),h.setScale()},draw:function(t){var e=this.ctx,n;if(i.fire(this.el,"flotr:beforedraw",[this.series,this]),this.series.length){for(e.save(),e.translate(this.plotOffset.left,this.plotOffset.top),n=0;n<this.series.length;n++)this.series[n].hide||this.drawSeries(this.series[n]);e.restore(),this.clip()}i.fire(this.el,"flotr:afterdraw",[this.series,this]),t&&t()},drawSeries:function(t){function e(t,e){var i=this.getOptions(t,e);this[e].draw(i)}var i=!1;t=t||this.series,n.each(o.graphTypes,function(n,o){t[o]&&t[o].show&&this[o]&&(i=!0,e.call(this,t,o))},this),i||e.call(this,t,this.options.defaultType)},getOptions:function(t,e){var i=t[e],n=this[e],s=t.xaxis,r=t.yaxis,a={context:this.ctx,width:this.plotWidth,height:this.plotHeight,fontSize:this.options.fontSize,fontColor:this.options.fontColor,textEnabled:this.textEnabled,htmlText:this.options.HtmlText,text:this._text,element:this.el,data:t.data,color:t.color,shadowSize:t.shadowSize,xScale:s.d2p,yScale:r.d2p,xInverse:s.p2d,yInverse:r.p2d};return a=o.merge(i,a),a.fillStyle=this.processColor(i.fillColor||t.color,{opacity:i.fillOpacity}),a},getEventPosition:function(t){var n=document,o=n.body,s=n.documentElement,r=this.axes,a=this.plotOffset,l=this.lastMousePos,h=i.eventPointer(t),c=h.x-l.pageX,u=h.y-l.pageY,d,f,p;return"ontouchstart"in this.el?(d=e.position(this.overlay),f=h.x-d.left-a.left,p=h.y-d.top-a.top):(d=this.overlay.getBoundingClientRect(),f=t.clientX-d.left-a.left-o.scrollLeft-s.scrollLeft,p=t.clientY-d.top-a.top-o.scrollTop-s.scrollTop),{x:r.x.p2d(f),x2:r.x2.p2d(f),y:r.y.p2d(p),y2:r.y2.p2d(p),relX:f,relY:p,dX:c,dY:u,absX:h.x,absY:h.y,pageX:h.x,pageY:h.y}},clickHandler:function(t){return this.ignoreClick?(this.ignoreClick=!1,this.ignoreClick):void i.fire(this.el,"flotr:click",[this.getEventPosition(t),this])},mouseMoveHandler:function(t){if(!this.mouseDownMoveHandler){var e=this.getEventPosition(t);i.fire(this.el,"flotr:mousemove",[t,e,this]),this.lastMousePos=e}},mouseDownHandler:function(t){this.mouseUpHandler||(this.mouseUpHandler=n.bind(function(t){i.stopObserving(document,"mouseup",this.mouseUpHandler),i.stopObserving(document,"mousemove",this.mouseDownMoveHandler),this.mouseDownMoveHandler=null,this.mouseUpHandler=null,i.fire(this.el,"flotr:mouseup",[t,this])},this),this.mouseDownMoveHandler=n.bind(function(e){var n=this.getEventPosition(e);i.fire(this.el,"flotr:mousemove",[t,n,this]),this.lastMousePos=n},this),i.observe(document,"mouseup",this.mouseUpHandler),i.observe(document,"mousemove",this.mouseDownMoveHandler),i.fire(this.el,"flotr:mousedown",[t,this]),this.ignoreClick=!1)},drawTooltip:function(t,i,n,o){var s=this.getMouseTrack(),r="opacity:0.7;background-color:#000;color:#fff;display:none;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;",a=o.position,l=o.margin,h=this.plotOffset;null!==i&&null!==n?(o.relative?("n"==a.charAt(0)?r+="bottom:"+(l-h.top-n+this.canvasHeight)+"px;top:auto;":"s"==a.charAt(0)&&(r+="top:"+(l+h.top+n)+"px;bottom:auto;"),"e"==a.charAt(1)?r+="left:"+(l+h.left+i)+"px;right:auto;":"w"==a.charAt(1)&&(r+="right:"+(l-h.left-i+this.canvasWidth)+"px;left:auto;")):("n"==a.charAt(0)?r+="top:"+(l+h.top)+"px;bottom:auto;":"s"==a.charAt(0)&&(r+="bottom:"+(l+h.bottom)+"px;top:auto;"),"e"==a.charAt(1)?r+="right:"+(l+h.right)+"px;left:auto;":"w"==a.charAt(1)&&(r+="left:"+(l+h.left)+"px;right:auto;")),s.style.cssText=r,e.empty(s),e.insert(s,t),e.show(s)):e.hide(s)},clip:function(t){var e=this.plotOffset,i=this.canvasWidth,n=this.canvasHeight;if(t=t||this.ctx,o.isIE&&o.isIE<9&&!o.isFlashCanvas){if(t===this.octx)return;t.save(),t.fillStyle=this.processColor(this.options.ieBackgroundColor),t.fillRect(0,0,i,e.top),t.fillRect(0,0,e.left,n),t.fillRect(0,n-e.bottom,i,e.bottom),t.fillRect(i-e.right,0,e.right,n),t.restore()}else t.clearRect(0,0,i,e.top),t.clearRect(0,0,e.left,n),t.clearRect(0,n-e.bottom,i,e.bottom),t.clearRect(i-e.right,0,e.right,n)},_initMembers:function(){this._handles=[],this.lastMousePos={pageX:null,pageY:null},this.plotOffset={left:0,right:0,top:0,bottom:0},this.ignoreClick=!0,this.prevHit=null},_initGraphTypes:function(){n.each(o.graphTypes,function(t,e){this[e]=o.clone(t)},this)},_initEvents:function(){var t=this.el,e,o,s;"ontouchstart"in t?(e=n.bind(function(n){s=!0,i.stopObserving(document,"touchend",e),i.fire(t,"flotr:mouseup",[event,this]),this.multitouches=null,o||this.clickHandler(n)},this),this.observe(this.overlay,"touchstart",n.bind(function(n){o=!1,s=!1,this.ignoreClick=!1,n.touches&&n.touches.length>1&&(this.multitouches=n.touches),i.fire(t,"flotr:mousedown",[event,this]),this.observe(document,"touchend",e)},this)),this.observe(this.overlay,"touchmove",n.bind(function(e){var n=this.getEventPosition(e);this.options.preventDefault&&e.preventDefault(),o=!0,this.multitouches||e.touches&&e.touches.length>1?this.multitouches=e.touches:s||i.fire(t,"flotr:mousemove",[event,n,this]),this.lastMousePos=n},this))):this.observe(this.overlay,"mousedown",n.bind(this.mouseDownHandler,this)).observe(t,"mousemove",n.bind(this.mouseMoveHandler,this)).observe(this.overlay,"click",n.bind(this.clickHandler,this)).observe(t,"mouseout",function(e){i.fire(t,"flotr:mouseout",e)})},_initCanvas:function(){function t(t,i){return t||(t=e.create("canvas"),"undefined"!=typeof FlashCanvas&&"function"==typeof t.getContext&&(FlashCanvas.initElement(t),this.isFlashCanvas=!0),t.className="flotr-"+i,t.style.cssText="position:absolute;left:0px;top:0px;",e.insert(o,t)),n.each(c,function(n,o){e.show(t),("canvas"!=i||t.getAttribute(o)!==n)&&(t.setAttribute(o,n*s.resolution),t.style[o]=n+"px")}),t.context_=null,t}function i(t){window.G_vmlCanvasManager&&window.G_vmlCanvasManager.initElement(t);var e=t.getContext("2d");return window.G_vmlCanvasManager||e.scale(s.resolution,s.resolution),e}var o=this.el,s=this.options,r=o.children,a=[],l,h,c,u;for(h=r.length;h--;)l=r[h],this.canvas||"flotr-canvas"!==l.className?this.overlay||"flotr-overlay"!==l.className?a.push(l):this.overlay=l:this.canvas=l;for(h=a.length;h--;)o.removeChild(a[h]);if(e.setStyles(o,{position:"relative"}),c={},c.width=o.clientWidth,c.height=o.clientHeight,c.width<=0||c.height<=0||s.resolution<=0)throw"Invalid dimensions for plot, width = "+c.width+", height = "+c.height+", resolution = "+s.resolution;this.canvas=t(this.canvas,"canvas"),this.overlay=t(this.overlay,"overlay"),this.ctx=i(this.canvas),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.octx=i(this.overlay),this.octx.clearRect(0,0,this.overlay.width,this.overlay.height),this.canvasHeight=c.height,this.canvasWidth=c.width,this.textEnabled=!!this.ctx.drawText||!!this.ctx.fillText},_initPlugins:function(){n.each(o.plugins,function(t,e){n.each(t.callbacks,function(t,e){this.observe(this.el,e,n.bind(t,this))},this),this[e]=o.clone(t),n.each(this[e],function(t,i){n.isFunction(t)&&(this[e][i]=n.bind(t,this))},this)},this)},_initOptions:function(t){var e=o.clone(o.defaultOptions);e.x2axis=n.extend(n.clone(e.xaxis),e.x2axis),e.y2axis=n.extend(n.clone(e.yaxis),e.y2axis),this.options=o.merge(t||{},e),null===this.options.grid.minorVerticalLines&&"logarithmic"===this.options.xaxis.scaling&&(this.options.grid.minorVerticalLines=!0),null===this.options.grid.minorHorizontalLines&&"logarithmic"===this.options.yaxis.scaling&&(this.options.grid.minorHorizontalLines=!0),i.fire(this.el,"flotr:afterinitoptions",[this]),this.axes=o.Axis.getAxes(this.options);var s=[],r=[],a=this.series.length,l=this.series.length,h=this.options.colors,c=[],u=0,d,f,p,g;for(f=l-1;f>-1;--f)d=this.series[f].color,d&&(--l,n.isNumber(d)?s.push(d):c.push(o.Color.parse(d)));for(f=s.length-1;f>-1;--f)l=Math.max(l,s[f]+1);for(f=0;r.length<l;){d=h.length==f?new o.Color(100,100,100):o.Color.parse(h[f]);var m=u%2==1?-1:1,x=1+m*Math.ceil(u/2)*.2;d.scale(x,x,x),r.push(d),++f>=h.length&&(f=0,++u)}for(f=0,p=0;a>f;++f){g=this.series[f],g.color?n.isNumber(g.color)&&(g.color=r[g.color].toString()):g.color=r[p++].toString(),g.xaxis||(g.xaxis=this.axes.x),1==g.xaxis?g.xaxis=this.axes.x:2==g.xaxis&&(g.xaxis=this.axes.x2),g.yaxis||(g.yaxis=this.axes.y),1==g.yaxis?g.yaxis=this.axes.y:2==g.yaxis&&(g.yaxis=this.axes.y2);for(var v in o.graphTypes)g[v]=n.extend(n.clone(this.options[v]),g[v]);g.mouse=n.extend(n.clone(this.options.mouse),g.mouse),n.isUndefined(g.shadowSize)&&(g.shadowSize=this.options.shadowSize)}},_setEl:function(t){if(!t)throw"The target container doesn't exist";if(t.graph instanceof Graph)t.graph.destroy();else if(!t.clientWidth)throw"The target container must be visible";t.graph=this,this.el=t}},Flotr.Graph=Graph}(),function(){function t(t){this.orientation=1,this.offset=0,this.datamin=Number.MAX_VALUE,this.datamax=-Number.MAX_VALUE,o.extend(this,t)}function e(t,e){return t=Math.log(Math.max(t,Number.MIN_VALUE)),e!==Math.E&&(t/=Math.log(e)),t}function n(t,e){return e===Math.E?Math.exp(t):Math.pow(e,t)}var o=Flotr._,s="logarithmic";t.prototype={setScale:function(){var t=this.length,i=this.max,o=this.min,r=this.offset,a=this.orientation,l=this.options,h=l.scaling===s,c;c=h?t/(e(i,l.base)-e(o,l.base)):t/(i-o),this.scale=c,h?(this.d2p=function(t){return r+a*(e(t,l.base)-e(o,l.base))*c},this.p2d=function(t){return n((r+a*t)/c+e(o,l.base),l.base)}):(this.d2p=function(t){return r+a*(t-o)*c},this.p2d=function(t){return(r+a*t)/c+o})},calculateTicks:function(){var t=this.options;this.ticks=[],this.minorTicks=[],t.ticks?(this._cleanUserTicks(t.ticks,this.ticks),this._cleanUserTicks(t.minorTicks||[],this.minorTicks)):"time"==t.mode?this._calculateTimeTicks():"logarithmic"===t.scaling?this._calculateLogTicks():this._calculateTicks(),o.each(this.ticks,function(t){t.label+=""}),o.each(this.minorTicks,function(t){t.label+=""})},calculateRange:function(){if(this.used){var t=this,e=t.options,i=null!==e.min?e.min:t.datamin,n=null!==e.max?e.max:t.datamax,o=e.autoscaleMargin;if("logarithmic"==e.scaling&&(0>=i&&(i=t.datamin),0>=n&&(n=i)),n==i){var s=n?.01:1;null===e.min&&(i-=s),null===e.max&&(n+=s)}if("logarithmic"===e.scaling){0>i&&(i=n/e.base);var r=Math.log(n);e.base!=Math.E&&(r/=Math.log(e.base)),r=Math.ceil(r);var a=Math.log(i);e.base!=Math.E&&(a/=Math.log(e.base)),a=Math.ceil(a),t.tickSize=Flotr.getTickSize(e.noTicks,a,r,null===e.tickDecimals?0:e.tickDecimals),null===e.minorTickFreq&&(e.minorTickFreq=r-a>10?0:r-a>5?2:5)}else t.tickSize=Flotr.getTickSize(e.noTicks,i,n,e.tickDecimals);t.min=i,t.max=n,null===e.min&&e.autoscale&&(t.min-=t.tickSize*o,t.min<0&&t.datamin>=0&&(t.min=0),t.min=t.tickSize*Math.floor(t.min/t.tickSize)),null===e.max&&e.autoscale&&(t.max+=t.tickSize*o,t.max>0&&t.datamax<=0&&t.datamax!=t.datamin&&(t.max=0),t.max=t.tickSize*Math.ceil(t.max/t.tickSize)),t.min==t.max&&(t.max=t.min+1)}},calculateTextDimensions:function(t,e){var i="",n,o;if(this.options.showLabels)for(o=0;o<this.ticks.length;++o)n=this.ticks[o].label.length,n>i.length&&(i=this.ticks[o].label);this.maxLabel=t.dimensions(i,{size:e.fontSize,angle:Flotr.toRad(this.options.labelsAngle)},"font-size:smaller;","flotr-grid-label"),this.titleSize=t.dimensions(this.options.title,{size:1.2*e.fontSize,angle:Flotr.toRad(this.options.titleAngle)},"font-weight:bold;","flotr-axis-title")},_cleanUserTicks:function(t,e){var i=this,n=this.options,s,r,a,l;for(o.isFunction(t)&&(t=t({min:i.min,max:i.max})),r=0;r<t.length;++r)l=t[r],"object"==typeof l?(s=l[0],a=l.length>1?l[1]:n.tickFormatter(s,{min:i.min,max:i.max})):(s=l,a=n.tickFormatter(s,{min:this.min,max:this.max})),e[r]={v:s,label:a}},_calculateTimeTicks:function(){this.ticks=Flotr.Date.generator(this)},_calculateLogTicks:function(){var t=this,e=t.options,n,o,s=Math.log(t.max);e.base!=Math.E&&(s/=Math.log(e.base)),s=Math.ceil(s);var r=Math.log(t.min);for(e.base!=Math.E&&(r/=Math.log(e.base)),r=Math.ceil(r),i=r;s>i;i+=t.tickSize){o=e.base==Math.E?Math.exp(i):Math.pow(e.base,i);var a=o*(e.base==Math.E?Math.exp(t.tickSize):Math.pow(e.base,t.tickSize)),l=(a-o)/e.minorTickFreq;for(t.ticks.push({v:o,label:e.tickFormatter(o,{min:t.min,max:t.max})}),n=o+l;a>n;n+=l)t.minorTicks.push({v:n,label:e.tickFormatter(n,{min:t.min,max:t.max})})}o=e.base==Math.E?Math.exp(i):Math.pow(e.base,i),t.ticks.push({v:o,label:e.tickFormatter(o,{min:t.min,max:t.max})})},_calculateTicks:function(){var t=this,e=t.options,i=t.tickSize,n=t.min,o=t.max,s=i*Math.ceil(n/i),r,a,l,h,c,u;for(e.minorTickFreq&&(a=i/e.minorTickFreq),c=0;(l=h=s+c*i)<=o;++c)if(r=e.tickDecimals,null===r&&(r=1-Math.floor(Math.log(i)/Math.LN10)),0>r&&(r=0),l=l.toFixed(r),t.ticks.push({v:l,label:e.tickFormatter(l,{min:t.min,max:t.max})}),e.minorTickFreq)for(u=0;u<e.minorTickFreq&&o>c*i+u*a;++u)l=h+u*a,t.minorTicks.push({v:l,label:e.tickFormatter(l,{min:t.min,max:t.max})})}},o.extend(t,{getAxes:function(e){return{x:new t({options:e.xaxis,n:1,length:this.plotWidth}),x2:new t({options:e.x2axis,n:2,length:this.plotWidth}),y:new t({options:e.yaxis,n:1,length:this.plotHeight,offset:this.plotHeight,orientation:-1}),y2:new t({options:e.y2axis,n:2,length:this.plotHeight,offset:this.plotHeight,orientation:-1})}}}),Flotr.Axis=t}(),function(){function t(t){e.extend(this,t)}var e=Flotr._;t.prototype={getRange:function(){var t=this.data,e=t.length,i=Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,s=-Number.MAX_VALUE,r=!1,a=!1,l,h,c;if(0>e||this.hide)return!1;for(c=0;e>c;c++)l=t[c][0],h=t[c][1],null!==l&&(i>l&&(i=l,r=!0),l>o&&(o=l,r=!0)),null!==h&&(n>h&&(n=h,a=!0),h>s&&(s=h,a=!0));return{xmin:i,xmax:o,ymin:n,ymax:s,xused:r,yused:a}}},e.extend(t,{getSeries:function(i){return e.map(i,function(i){var n;return i.data?(n=new t,e.extend(n,i)):n=new t({data:i}),n})}}),Flotr.Series=t}(),Flotr.addType("lines",{options:{show:!1,lineWidth:2,fill:!1,fillBorder:!1,fillColor:null,fillOpacity:.4,steps:!1,stacked:!1},stack:{values:[]},draw:function(t){var e=t.context,i=t.lineWidth,n=t.shadowSize,o;e.save(),e.lineJoin="round",n&&(e.lineWidth=n/2,o=i/2+e.lineWidth/2,e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,o+n/2,!1),e.strokeStyle="rgba(0,0,0,0.2)",this.plot(t,o,!1)),e.lineWidth=i,e.strokeStyle=t.color,this.plot(t,0,!0),e.restore()},plot:function(t,e,i){function n(){!e&&t.fill&&g&&(m=a(g[0]),o.fillStyle=t.fillStyle,o.lineTo(x,p),o.lineTo(m,p),o.lineTo(m,l(g[1])),o.fill(),t.fillBorder&&o.stroke())}var o=t.context,s=t.width,r=t.height,a=t.xScale,l=t.yScale,h=t.data,c=t.stacked?this.stack:!1,u=h.length-1,d=null,f=null,p=l(0),g=null,m,x,v,y,b,w,M;if(!(1>u)){for(o.beginPath(),M=0;u>M;++M)null!==h[M][1]&&null!==h[M+1][1]?(m=a(h[M][0]),x=a(h[M+1][0]),null===g&&(g=h[M]),c?(b=c.values[h[M][0]]||0,w=c.values[h[M+1][0]]||c.values[h[M][0]]||0,v=l(h[M][1]+b),y=l(h[M+1][1]+w),i&&(h[M].y0=b,c.values[h[M][0]]=h[M][1]+b,M==u-1&&(h[M+1].y0=w,c.values[h[M+1][0]]=h[M+1][1]+w))):(v=l(h[M][1]),y=l(h[M+1][1])),v>r&&y>r||0>v&&0>y||0>m&&0>x||m>s&&x>s||((d!=m||f!=v+e)&&o.moveTo(m,v+e),d=x,f=y+e,t.steps?(o.lineTo(d+e/2,v+e),o.lineTo(d+e/2,f)):o.lineTo(d,f))):t.fill&&M>0&&null!==h[M][1]&&(o.stroke(),n(),g=null,o.closePath(),o.beginPath());(!t.fill||t.fill&&!t.fillBorder)&&o.stroke(),n(),o.closePath()}},extendYRange:function(t,e,i,n){var o=t.options;if(i.stacked&&(!o.max&&0!==o.max||!o.min&&0!==o.min)){var s=t.max,r=t.min,a=n.positiveSums||{},l=n.negativeSums||{},h,c;for(c=0;c<e.length;c++)h=e[c][0]+"",e[c][1]>0?(a[h]=(a[h]||0)+e[c][1],s=Math.max(s,a[h])):(l[h]=(l[h]||0)+e[c][1],r=Math.min(r,l[h]));n.negativeSums=l,n.positiveSums=a,t.max=s,t.min=r}i.steps&&(this.hit=function(t){var e=t.data,i=t.args,n=t.yScale,o=i[0],s=e.length,r=i[1],a=t.xInverse(o.relX),l=o.relY,h;for(h=0;s-1>h;h++)if(a>=e[h][0]&&a<=e[h+1][0]){Math.abs(n(e[h][1])-l)<8&&(r.x=e[h][0],r.y=e[h][1],r.index=h,r.seriesIndex=t.index);break}},this.drawHit=function(t){var e=t.context,i=t.args,n=t.data,o=t.xScale,s=i.index,r=o(i.x),a=t.yScale(i.y),l;n.length-1>s&&(l=t.xScale(n[s+1][0]),e.save(),e.strokeStyle=t.color,e.lineWidth=t.lineWidth,e.beginPath(),e.moveTo(r,a),e.lineTo(l,a),e.stroke(),e.closePath(),e.restore())},this.clearHit=function(t){var e=t.context,i=t.args,n=t.data,o=t.xScale,s=t.lineWidth,r=i.index,a=o(i.x),l=t.yScale(i.y),h;n.length-1>r&&(h=t.xScale(n[r+1][0]),e.clearRect(a-s,l-s,h-a+2*s,2*s))})}}),Flotr.addType("bars",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,horizontal:!1,stacked:!1,centered:!0,topPadding:.1,grouped:!1},stack:{positive:[],negative:[],_positive:[],_negative:[]},draw:function(t){var e=t.context;this.current+=1,e.save(),e.lineJoin="miter",e.lineWidth=t.lineWidth,e.strokeStyle=t.color,t.fill&&(e.fillStyle=t.fillStyle),this.plot(t),e.restore()},plot:function(t){var e=t.data,i=t.context,n=t.shadowSize,o,s,r,a,l,h;if(!(e.length<1))for(this.translate(i,t.horizontal),o=0;o<e.length;o++)s=this.getBarGeometry(e[o][0],e[o][1],t),null!==s&&(r=s.left,a=s.top,l=s.width,h=s.height,t.fill&&i.fillRect(r,a,l,h),n&&(i.save(),i.fillStyle="rgba(0,0,0,0.05)",i.fillRect(r+n,a+n,l,h),i.restore()),t.lineWidth&&i.strokeRect(r,a,l,h))},translate:function(t,e){e&&(t.rotate(-Math.PI/2),t.scale(-1,1))},getBarGeometry:function(t,e,i){var n=i.horizontal,o=i.barWidth,s=i.centered,r=i.stacked?this.stack:!1,a=i.lineWidth,l=s?o/2:0,h=n?i.yScale:i.xScale,c=n?i.xScale:i.yScale,u=n?e:t,d=n?t:e,f=0,p,g,m,x,v;return i.grouped&&(this.current/this.groups,u-=l,o/=this.groups,l=o/2,u=u+o*this.current-l),r&&(p=d>0?r.positive:r.negative,f=p[u]||f,p[u]=f+d),g=h(u-l),m=h(u+o-l),x=c(d+f),v=c(f),0>v&&(v=0),null===t||null===e?null:{x:u,y:d,xScale:h,yScale:c,top:x,left:Math.min(g,m)-a/2,width:Math.abs(m-g)-a,height:v-x}},hit:function(t){var e=t.data,i=t.args,n=i[0],o=i[1],s=t.xInverse(n.relX),r=t.yInverse(n.relY),a=this.getBarGeometry(s,r,t),l=a.width/2,h=a.left,c=a.y,u,d;for(d=e.length;d--;)u=this.getBarGeometry(e[d][0],e[d][1],t),(c>0&&c<u.y||0>c&&c>u.y)&&Math.abs(h-u.left)<l&&(o.x=e[d][0],o.y=e[d][1],o.index=d,o.seriesIndex=t.index)},drawHit:function(t){var e=t.context,i=t.args,n=this.getBarGeometry(i.x,i.y,t),o=n.left,s=n.top,r=n.width,a=n.height;e.save(),e.strokeStyle=t.color,e.lineWidth=t.lineWidth,this.translate(e,t.horizontal),e.beginPath(),e.moveTo(o,s+a),e.lineTo(o,s),e.lineTo(o+r,s),e.lineTo(o+r,s+a),t.fill&&(e.fillStyle=t.fillStyle,e.fill()),e.stroke(),e.closePath(),e.restore()},clearHit:function(t){var e=t.context,i=t.args,n=this.getBarGeometry(i.x,i.y,t),o=n.left,s=n.width,r=n.top,a=n.height,l=2*t.lineWidth;e.save(),this.translate(e,t.horizontal),e.clearRect(o-l,Math.min(r,r+a)-l,s+2*l,Math.abs(a)+2*l),e.restore()},extendXRange:function(t,e,i,n){this._extendRange(t,e,i,n),this.groups=this.groups+1||1,this.current=0},extendYRange:function(t,e,i,n){this._extendRange(t,e,i,n)},_extendRange:function(t,e,i,n){var o=t.options.max;if(!_.isNumber(o)&&!_.isString(o)){var s=t.min,r=t.max,a=i.horizontal,l=t.orientation,h=this.positiveSums||{},c=this.negativeSums||{},u,d,f,p;if((1==l&&!a||-1==l&&a)&&i.centered&&(r=Math.max(t.datamax+i.barWidth,r),s=Math.min(t.datamin-i.barWidth,s)),i.stacked&&(1==l&&a||-1==l&&!a))for(p=e.length;p--;)u=e[p][1==l?1:0]+"",d=e[p][1==l?0:1],d>0?(h[u]=(h[u]||0)+d,r=Math.max(r,h[u])):(c[u]=(c[u]||0)+d,s=Math.min(s,c[u]));(1==l&&a||-1==l&&!a)&&i.topPadding&&(t.max===t.datamax||i.stacked&&this.stackMax!==r)&&(r+=i.topPadding*(r-s)),this.stackMin=s,this.stackMax=r,this.negativeSums=c,this.positiveSums=h,t.max=r,t.min=s}}}),Flotr.addType("bubbles",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,baseRadius:2},draw:function(t){var e=t.context,i=t.shadowSize;e.save(),e.lineWidth=t.lineWidth,e.fillStyle="rgba(0,0,0,0.05)",e.strokeStyle="rgba(0,0,0,0.05)",this.plot(t,i/2),e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/4),e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t,e){var i=t.data,n=t.context,o,s,r,a,l;for(e=e||0,s=0;s<i.length;++s)o=this.getGeometry(i[s],t),n.beginPath(),n.arc(o.x+e,o.y+e,o.z,0,2*Math.PI,!0),n.stroke(),t.fill&&n.fill(),n.closePath()},getGeometry:function(t,e){return{x:e.xScale(t[0]),y:e.yScale(t[1]),z:t[2]*e.baseRadius}},hit:function(t){var e=t.data,n=t.args,o=n[0],s=n[1],r=o.relX,a=o.relY,l,h,c,u;for(s.best=s.best||Number.MAX_VALUE,i=e.length;i--;)h=this.getGeometry(e[i],t),c=h.x-r,u=h.y-a,l=Math.sqrt(c*c+u*u),l<h.z&&h.z<s.best&&(s.x=e[i][0],s.y=e[i][1],s.index=i,s.seriesIndex=t.index,s.best=h.z)},drawHit:function(t){var e=t.context,i=this.getGeometry(t.data[t.args.index],t);e.save(),e.lineWidth=t.lineWidth,e.fillStyle=t.fillStyle,e.strokeStyle=t.color,e.beginPath(),e.arc(i.x,i.y,i.z,0,2*Math.PI,!0),e.fill(),e.stroke(),e.closePath(),e.restore()},clearHit:function(t){var e=t.context,i=this.getGeometry(t.data[t.args.index],t),n=i.z+t.lineWidth;e.save(),e.clearRect(i.x-n,i.y-n,2*n,2*n),e.restore()}}),Flotr.addType("candles",{options:{show:!1,lineWidth:1,wickLineWidth:1,candleWidth:.6,fill:!0,upFillColor:"#00A8F0",downFillColor:"#CB4B4B",fillOpacity:.5,barcharts:!1},draw:function(t){var e=t.context;e.save(),e.lineJoin="miter",e.lineCap="butt",e.lineWidth=t.wickLineWidth||t.lineWidth,this.plot(t),e.restore()},plot:function(t){var e=t.data,i=t.context,n=t.xScale,o=t.yScale,s=t.candleWidth/2,r=t.shadowSize,a=t.lineWidth,l=t.wickLineWidth,h=l%2/2,c,u,d,f,p,g,m,x,v,y,b,w,M,k,S,T;if(!(e.length<1))for(T=0;T<e.length;T++)u=e[T],d=u[0],p=u[1],g=u[2],m=u[3],x=u[4],v=n(d-s),y=n(d+s),b=o(m),w=o(g),M=o(Math.min(p,x)),k=o(Math.max(p,x)),c=t[p>x?"downFillColor":"upFillColor"],t.fill&&!t.barcharts&&(i.fillStyle="rgba(0,0,0,0.05)",i.fillRect(v+r,k+r,y-v,M-k),i.save(),i.globalAlpha=t.fillOpacity,i.fillStyle=c,i.fillRect(v,k+a,y-v,M-k),i.restore()),(a||l)&&(d=Math.floor((v+y)/2)+h,i.strokeStyle=c,i.beginPath(),t.barcharts?(i.moveTo(d,Math.floor(w+a)),i.lineTo(d,Math.floor(b+a)),S=x>p,i.moveTo(S?y:v,Math.floor(k+a)),i.lineTo(d,Math.floor(k+a)),i.moveTo(d,Math.floor(M+a)),i.lineTo(S?v:y,Math.floor(M+a))):(i.strokeRect(v,k+a,y-v,M-k),i.moveTo(d,Math.floor(k+a)),i.lineTo(d,Math.floor(w+a)),i.moveTo(d,Math.floor(M+a)),i.lineTo(d,Math.floor(b+a))),i.closePath(),i.stroke())},hit:function(t){var e=t.xScale,i=t.yScale,n=t.data,o=t.args,s=o[0],r=t.candleWidth/2,a=o[1],l=s.relX,h=s.relY,c=n.length,u,d,f,p,g,m,x,v;for(u=0;c>u;u++)if(d=n[u],f=d[2],p=d[3],g=e(d[0]-r),m=e(d[0]+r),v=i(p),x=i(f),l>g&&m>l&&h>x&&v>h)return a.x=d[0],a.index=u,void(a.seriesIndex=t.index)},drawHit:function(t){var e=t.context;e.save(),this.plot(_.defaults({fill:!!t.fillColor,upFillColor:t.color,downFillColor:t.color,data:[t.data[t.args.index]]},t)),e.restore()},clearHit:function(t){var e=t.args,i=t.context,n=t.xScale,o=t.yScale,s=t.lineWidth,r=t.candleWidth/2,a=t.data[e.index],l=n(a[0]-r)-s,h=n(a[0]+r)+s,c=o(a[2]),u=o(a[3])+s;i.clearRect(l,c,h-l,u-c)},extendXRange:function(t,e,i){null===t.options.max&&(t.max=Math.max(t.datamax+.5,t.max),t.min=Math.min(t.datamin-.5,t.min))}}),Flotr.addType("gantt",{options:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(t){var e=this.ctx,i=t.gantt.barWidth,n=Math.min(t.gantt.lineWidth,i);if(e.save(),e.translate(this.plotOffset.left,this.plotOffset.top),e.lineJoin="miter",e.lineWidth=n,e.strokeStyle=t.color,e.save(),this.gantt.plotShadows(t,i,0,t.gantt.fill),e.restore(),t.gantt.fill){var o=t.gantt.fillColor||t.color;e.fillStyle=this.processColor(o,{opacity:t.gantt.fillOpacity})}this.gantt.plot(t,i,0,t.gantt.fill),e.restore()},plot:function(t,e,i,n){var o=t.data;if(!(o.length<1)){var s=t.xaxis,r=t.yaxis,a=this.ctx,l;for(l=0;l<o.length;l++){var h=o[l][0],c=o[l][1],u=o[l][2],d=!0,f=!0,p=!0;if(null!==c&&null!==u){var g=c,m=c+u,x=h-(t.gantt.centered?e/2:0),v=h+e-(t.gantt.centered?e/2:0);m<s.min||g>s.max||v<r.min||x>r.max||(g<s.min&&(g=s.min,d=!1),m>s.max&&(m=s.max,s.lastSerie!=t&&(f=!1)),x<r.min&&(x=r.min),v>r.max&&(v=r.max,r.lastSerie!=t&&(f=!1)),n&&(a.beginPath(),a.moveTo(s.d2p(g),r.d2p(x)+i),a.lineTo(s.d2p(g),r.d2p(v)+i),a.lineTo(s.d2p(m),r.d2p(v)+i),a.lineTo(s.d2p(m),r.d2p(x)+i),a.fill(),a.closePath()),t.gantt.lineWidth&&(d||p||f)&&(a.beginPath(),a.moveTo(s.d2p(g),r.d2p(x)+i),a[d?"lineTo":"moveTo"](s.d2p(g),r.d2p(v)+i),a[f?"lineTo":"moveTo"](s.d2p(m),r.d2p(v)+i),a[p?"lineTo":"moveTo"](s.d2p(m),r.d2p(x)+i),a.stroke(),a.closePath()))}}}},plotShadows:function(t,e,i){var n=t.data;if(!(n.length<1)){var o,s,r,a,l=t.xaxis,h=t.yaxis,c=this.ctx,u=this.options.shadowSize;for(o=0;o<n.length;o++)if(s=n[o][0],r=n[o][1],a=n[o][2],null!==r&&null!==a){var d=r,f=r+a,p=s-(t.gantt.centered?e/2:0),g=s+e-(t.gantt.centered?e/2:0);if(!(f<l.min||d>l.max||g<h.min||p>h.max)){d<l.min&&(d=l.min),f>l.max&&(f=l.max),p<h.min&&(p=h.min),g>h.max&&(g=h.max);var m=l.d2p(f)-l.d2p(d)-(l.d2p(f)+u<=this.plotWidth?0:u),x=h.d2p(p)-h.d2p(g)-(h.d2p(p)+u<=this.plotHeight?0:u);c.fillStyle="rgba(0,0,0,0.05)",c.fillRect(Math.min(l.d2p(d)+u,this.plotWidth),Math.min(h.d2p(g)+u,this.plotHeight),m,x)}}}},extendXRange:function(t){if(null===t.options.max){var e=t.min,i=t.max,n,o,s,r,a,l={},h={},c=null;for(n=0;n<this.series.length;++n)if(r=this.series[n],a=r.gantt,a.show&&r.xaxis==t){for(o=0;o<r.data.length;o++)a.show&&(y=r.data[o][0]+"",l[y]=Math.max(l[y]||0,r.data[o][1]+r.data[o][2]),c=r);for(o in l)i=Math.max(l[o],i)}t.lastSerie=c,t.max=i,t.min=e}},extendYRange:function(t){if(null===t.options.max){var e=Number.MIN_VALUE,i=Number.MAX_VALUE,n,o,s,r,a={},l={},h=null;for(n=0;n<this.series.length;++n)if(s=this.series[n],r=s.gantt,r.show&&!s.hide&&s.yaxis==t){var c=Number.MIN_VALUE,u=Number.MAX_VALUE;for(o=0;o<s.data.length;o++)c=Math.max(c,s.data[o][0]),u=Math.min(u,s.data[o][0]);r.centered?(e=Math.max(c+.5,e),i=Math.min(u-.5,i)):(e=Math.max(c+1,e),i=Math.min(u,i)),r.barWidth+c>e&&(e=t.max+r.barWidth)}t.lastSerie=h,t.max=e,t.min=i,t.tickSize=Flotr.getTickSize(t.options.noTicks,i,e,t.options.tickDecimals)}}}),function(){function t(t){return"object"==typeof t&&t.constructor&&(Image?!0:t.constructor===Image)}Flotr.defaultMarkerFormatter=function(t){return Math.round(100*t.y)/100+""},Flotr.addType("markers",{options:{show:!1,lineWidth:1,color:"#000000",fill:!1,fillColor:"#FFFFFF",fillOpacity:.4,stroke:!1,position:"ct",verticalMargin:0,labelFormatter:Flotr.defaultMarkerFormatter,fontSize:Flotr.defaultOptions.fontSize,stacked:!1,stackingType:"b",horizontal:!1},stack:{positive:[],negative:[],values:[]},draw:function(t){function e(t,e){return a=o.negative[t]||0,r=o.positive[t]||0,e>0?(o.positive[t]=a+e,a+e):(o.negative[t]=r+e,r+e)}var i=t.data,n=t.context,o=t.stacked?t.stack:!1,s=t.stackingType,r,a,l,h,c,u,d;for(n.save(),n.lineJoin="round",n.lineWidth=t.lineWidth,n.strokeStyle="rgba(0,0,0,0.5)",n.fillStyle=t.fillStyle,h=0;h<i.length;++h)c=i[h][0],u=i[h][1],o&&("b"==s?t.horizontal?u=e(u,c):c=e(c,u):"a"==s&&(l=o.values[c]||0,o.values[c]=l+u,u=l+u)),d=t.labelFormatter({x:c,y:u,index:h,data:i}),this.plot(t.xScale(c),t.yScale(u),d,t);n.restore()},plot:function(e,i,n,o){var s=o.context;if(t(n)&&!n.complete)throw"Marker image not loaded.";this._plot(e,i,n,o)},_plot:function(e,i,n,o){var s=o.context,r=2,a=e,l=i,h;h=t(n)?{height:n.height,width:n.width}:o.text.canvas(n),h.width=Math.floor(h.width+2*r),h.height=Math.floor(h.height+2*r),-1!=o.position.indexOf("c")?a-=h.width/2+r:-1!=o.position.indexOf("l")&&(a-=h.width),-1!=o.position.indexOf("m")?l-=h.height/2+r:-1!=o.position.indexOf("t")?l-=h.height+o.verticalMargin:l+=o.verticalMargin,a=Math.floor(a)+.5,l=Math.floor(l)+.5,o.fill&&s.fillRect(a,l,h.width,h.height),o.stroke&&s.strokeRect(a,l,h.width,h.height),t(n)?s.drawImage(n,parseInt(a+r,10),parseInt(l+r,10)):Flotr.drawText(s,n,a+r,l+r,{textBaseline:"top",textAlign:"left",size:o.fontSize,color:o.color})}})}(),function(){var t=Flotr._;Flotr.defaultPieLabelFormatter=function(t,e){return(100*e/t).toFixed(2)+"%"},Flotr.addType("pie",{options:{show:!1,lineWidth:1,fill:!0,fillColor:null,fillOpacity:.6,explode:6,sizeRatio:.6,startAngle:Math.PI/4,labelFormatter:Flotr.defaultPieLabelFormatter,pie3D:!1,pie3DviewAngle:Math.PI/2*.8,pie3DspliceThickness:20,epsilon:.1},draw:function(t){var e=t.data,i=t.context,n=t.lineWidth,o=t.shadowSize,s=t.sizeRatio,r=t.height,a=t.width,l=t.explode,h=t.color,c=t.fill,u=t.fillStyle,d=Math.min(a,r)*s/2,f=e[0][1],p=[],g=1,m=2*Math.PI*f/this.total,x=this.startAngle||2*Math.PI*t.startAngle,v=x+m,y=x+m/2,b=t.labelFormatter(this.total,f),w=l+d+4,M=Math.cos(y)*w,k=Math.sin(y)*w,S=0>M?"right":"left",T=k>0?"top":"bottom",F,A,O;if(i.save(),i.translate(a/2,r/2),i.scale(1,g),A=Math.cos(y)*l,O=Math.sin(y)*l,o>0&&(this.plotSlice(A+o,O+o,d,x,v,i),c&&(i.fillStyle="rgba(0,0,0,0.1)",i.fill())),this.plotSlice(A,O,d,x,v,i),c&&(i.fillStyle=u,i.fill()),i.lineWidth=n,i.strokeStyle=h,i.stroke(),F={size:1.2*t.fontSize,color:t.fontColor,weight:1.5},b&&(t.htmlText||!t.textEnabled?(divStyle="position:absolute;"+T+":"+(r/2+("top"===T?k:-k))+"px;",divStyle+=S+":"+(a/2+("right"===S?-M:M))+"px;",p.push('<div style="',divStyle,'" class="flotr-grid-label">',b,"</div>")):(F.textAlign=S,F.textBaseline=T,Flotr.drawText(i,b,M,k,F))),t.htmlText||!t.textEnabled){var C=Flotr.DOM.node('<div style="color:'+t.fontColor+'" class="flotr-labels"></div>');Flotr.DOM.insert(C,p.join("")),Flotr.DOM.insert(t.element,C)}i.restore(),this.startAngle=v,this.slices=this.slices||[],this.slices.push({radius:d,x:A,y:O,explode:l,start:x,end:v})},plotSlice:function(t,e,i,n,o,s){s.beginPath(),s.moveTo(t,e),s.arc(t,e,i,n,o,!1),s.lineTo(t,e),s.closePath()},hit:function(t){var e=t.data[0],i=t.args,n=t.index,o=i[0],s=i[1],r=this.slices[n],a=o.relX-t.width/2,l=o.relY-t.height/2,h=Math.sqrt(a*a+l*l),c=Math.atan(l/a),u=2*Math.PI,d=r.explode||t.explode,f=r.start%u,p=r.end%u,g=t.epsilon;0>a?c+=Math.PI:a>0&&0>l&&(c+=u),h<r.radius+d&&h>d&&(c>f&&p>c||f>p&&(p>c||c>f)||f===p&&(r.start===r.end&&Math.abs(c-f)<g||r.start!==r.end&&Math.abs(c-f)>g))&&(s.x=e[0],s.y=e[1],s.sAngle=f,s.eAngle=p,s.index=0,s.seriesIndex=n,s.fraction=e[1]/this.total)
},drawHit:function(t){var e=t.context,i=this.slices[t.args.seriesIndex];e.save(),e.translate(t.width/2,t.height/2),this.plotSlice(i.x,i.y,i.radius,i.start,i.end,e),e.stroke(),e.restore()},clearHit:function(t){var e=t.context,i=this.slices[t.args.seriesIndex],n=2*t.lineWidth,o=i.radius+n;e.save(),e.translate(t.width/2,t.height/2),e.clearRect(i.x-o,i.y-o,2*o+n,2*o+n),e.restore()},extendYRange:function(t,e){this.total=(this.total||0)+e[0][1]}})}(),Flotr.addType("points",{options:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#FFFFFF",fillOpacity:1,hitRadius:null},draw:function(t){var e=t.context,i=t.lineWidth,n=t.shadowSize;e.save(),n>0&&(e.lineWidth=n/2,e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,n/2+e.lineWidth/2),e.strokeStyle="rgba(0,0,0,0.2)",this.plot(t,e.lineWidth/2)),e.lineWidth=t.lineWidth,e.strokeStyle=t.color,t.fill&&(e.fillStyle=t.fillStyle),this.plot(t),e.restore()},plot:function(t,e){var i=t.data,n=t.context,o=t.xScale,s=t.yScale,r,a,l;for(r=i.length-1;r>-1;--r)l=i[r][1],null!==l&&(a=o(i[r][0]),l=s(l),0>a||a>t.width||0>l||l>t.height||(n.beginPath(),e?n.arc(a,l+e,t.radius,0,Math.PI,!1):(n.arc(a,l,t.radius,0,2*Math.PI,!0),t.fill&&n.fill()),n.stroke(),n.closePath()))}}),Flotr.addType("radar",{options:{show:!1,lineWidth:2,fill:!0,fillOpacity:.4,radiusRatio:.9,sensibility:2},draw:function(t){var e=t.context,i=t.shadowSize;e.save(),e.translate(t.width/2,t.height/2),e.lineWidth=t.lineWidth,e.fillStyle="rgba(0,0,0,0.05)",e.strokeStyle="rgba(0,0,0,0.05)",this.plot(t,i/2),e.strokeStyle="rgba(0,0,0,0.1)",this.plot(t,i/4),e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t,e){var i=t.data,n=t.context,o=Math.min(t.height,t.width)*t.radiusRatio/2,s=2*Math.PI/i.length,r=-Math.PI/2,a,l;for(e=e||0,n.beginPath(),a=0;a<i.length;++a)l=i[a][1]/this.max,n[0===a?"moveTo":"lineTo"](Math.cos(a*s+r)*o*l+e,Math.sin(a*s+r)*o*l+e);n.closePath(),t.fill&&n.fill(),n.stroke()},getGeometry:function(t,e){var i=Math.min(e.height,e.width)*e.radiusRatio/2,n=2*Math.PI/e.data.length,o=-Math.PI/2,s=t[1]/this.max;return{x:Math.cos(t[0]*n+o)*i*s+e.width/2,y:Math.sin(t[0]*n+o)*i*s+e.height/2}},hit:function(t){for(var e=t.args,i=e[0],n=e[1],o=i.relX,s=i.relY,r,a,l,h,c=0;c<n.series.length;c++)for(var u=n.series[c],d=u.data,f=d.length;f--;)if(a=this.getGeometry(d[f],t),l=a.x-o,h=a.y-s,r=Math.sqrt(l*l+h*h),r<2*t.sensibility)return n.x=d[f][0],n.y=d[f][1],n.index=f,n.seriesIndex=c,n},drawHit:function(t){var e=2*Math.PI/t.data.length,i=-Math.PI/2,n=Math.min(t.height,t.width)*t.radiusRatio/2,o=t.args.series,s=o.points.hitRadius||o.points.radius||o.mouse.radius,r=t.context;r.translate(t.width/2,t.height/2);var a=t.args.index,l=t.data[a][1]/this.max,h=Math.cos(a*e+i)*n*l,c=Math.sin(a*e+i)*n*l;r.beginPath(),r.arc(h,c,s,0,2*Math.PI,!0),r.closePath(),r.stroke()},clearHit:function(t){var e=2*Math.PI/t.data.length,i=-Math.PI/2,n=Math.min(t.height,t.width)*t.radiusRatio/2,o=t.context,s=t.args.series,r=s.points?s.points.lineWidth:1;offset=(s.points.hitRadius||s.points.radius||s.mouse.radius)+r,o.translate(t.width/2,t.height/2);var a=t.args.index,l=t.data[a][1]/this.max,h=Math.cos(a*e+i)*n*l,c=Math.sin(a*e+i)*n*l;o.clearRect(h-offset,c-offset,2*offset,2*offset)},extendYRange:function(t,e){this.max=Math.max(t.max,this.max||-Number.MAX_VALUE)}}),Flotr.addType("timeline",{options:{show:!1,lineWidth:1,barWidth:.2,fill:!0,fillColor:null,fillOpacity:.4,centered:!0},draw:function(t){var e=t.context;e.save(),e.lineJoin="miter",e.lineWidth=t.lineWidth,e.strokeStyle=t.color,e.fillStyle=t.fillStyle,this.plot(t),e.restore()},plot:function(t){var e=t.data,i=t.context,n=t.xScale,o=t.yScale,s=t.barWidth,r=t.lineWidth,a;Flotr._.each(e,function(t){var e=t[0],a=t[1],l=t[2],h=s,c=Math.ceil(n(e)),u=Math.ceil(n(e+l))-c,d=Math.round(o(a)),f=Math.round(o(a-h))-d,p=c-r/2,g=Math.round(d-f/2)-r/2;i.strokeRect(p,g,u,f),i.fillRect(p,g,u,f)})},extendRange:function(t){var e=t.data,i=t.xaxis,n=t.yaxis,o=t.timeline.barWidth;if(null===i.options.min&&(i.min=i.datamin-o/2),null===i.options.max){var s=i.max;Flotr._.each(e,function(t){s=Math.max(s,t[0]+t[2])},this),i.max=s+o/2}null===n.options.min&&(n.min=n.datamin-o),null===n.options.min&&(n.max=n.datamax+o)}}),function(){var t=Flotr.DOM;Flotr.addPlugin("crosshair",{options:{mode:null,color:"#FF0000",hideCursor:!0},callbacks:{"flotr:mousemove":function(t,e){this.options.crosshair.mode&&(this.crosshair.clearCrosshair(),this.crosshair.drawCrosshair(e))}},drawCrosshair:function(e){var i=this.octx,n=this.options.crosshair,o=this.plotOffset,s=o.left+Math.round(e.relX)+.5,r=o.top+Math.round(e.relY)+.5;return e.relX<0||e.relY<0||e.relX>this.plotWidth||e.relY>this.plotHeight?(this.el.style.cursor=null,void t.removeClass(this.el,"flotr-crosshair")):(n.hideCursor&&(this.el.style.cursor="none",t.addClass(this.el,"flotr-crosshair")),i.save(),i.strokeStyle=n.color,i.lineWidth=1,i.beginPath(),-1!=n.mode.indexOf("x")&&(i.moveTo(s,o.top),i.lineTo(s,o.top+this.plotHeight)),-1!=n.mode.indexOf("y")&&(i.moveTo(o.left,r),i.lineTo(o.left+this.plotWidth,r)),i.stroke(),void i.restore())},clearCrosshair:function(){var t=this.plotOffset,e=this.lastMousePos,i=this.octx;e&&(i.clearRect(Math.round(e.relX)+t.left,t.top,1,this.plotHeight+1),i.clearRect(t.left,Math.round(e.relY)+t.top,this.plotWidth+1,1))}})}(),function(){function t(t,e,i,n,o,s){var r="image/"+t,a=i.getImageData(0,0,n,o),l=new Image;return i.save(),i.globalCompositeOperation="destination-over",i.fillStyle=s,i.fillRect(0,0,n,o),l.src=e.toDataURL(r),i.restore(),i.clearRect(0,0,n,o),i.putImageData(a,0,0),l}var e=Flotr.DOM,i=Flotr._;Flotr.addPlugin("download",{saveImage:function(n,o,s,r){var a=this.options.grid,l;if(Flotr.isIE&&Flotr.isIE<9)return l="<html><body>"+this.canvas.firstChild.innerHTML+"</body></html>",window.open().document.write(l);if("jpeg"===n||"png"===n)return l=t(n,this.canvas,this.ctx,this.canvasWidth,this.canvasHeight,a&&a.backgroundColor||"#ffffff"),i.isElement(l)&&r?(this.download.restoreCanvas(),e.hide(this.canvas),e.hide(this.overlay),e.setStyles({position:"absolute"}),e.insert(this.el,l),this.saveImageElement=l,void 0):window.open(l.src)},restoreCanvas:function(){e.show(this.canvas),e.show(this.overlay),this.saveImageElement&&this.el.removeChild(this.saveImageElement),this.saveImageElement=null}})}(),function(){var t=Flotr.EventAdapter,e=Flotr._;Flotr.addPlugin("graphGrid",{callbacks:{"flotr:beforedraw":function(){this.graphGrid.drawGrid()},"flotr:afterdraw":function(){this.graphGrid.drawOutline()}},drawGrid:function(){function i(t){for(x=0;x<t.length;++x){var e=t[x].v/g.max;for(v=0;b>=v;++v)r[0===v?"moveTo":"lineTo"](Math.cos(v*w+M)*y*e,Math.sin(v*w+M)*y*e)}}function n(t,i){e.each(e.pluck(t,"v"),function(t){t<=g.min||t>=g.max||(t==g.min||t==g.max)&&l.outlineWidth||i(Math.floor(g.d2p(t))+r.lineWidth/2)})}function o(t){r.moveTo(t,0),r.lineTo(t,f)}function s(t){r.moveTo(0,t),r.lineTo(p,t)}var r=this.ctx,a=this.options,l=a.grid,h=l.verticalLines,c=l.horizontalLines,u=l.minorVerticalLines,d=l.minorHorizontalLines,f=this.plotHeight,p=this.plotWidth,g,m,x,v;if((h||u||c||d)&&t.fire(this.el,"flotr:beforegrid",[this.axes.x,this.axes.y,a,this]),r.save(),r.lineWidth=1,r.strokeStyle=l.tickColor,l.circular){r.translate(this.plotOffset.left+p/2,this.plotOffset.top+f/2);var y=Math.min(f,p)*a.radar.radiusRatio/2,b=this.axes.x.ticks.length,w=2*(Math.PI/b),M=-Math.PI/2;r.beginPath(),g=this.axes.y,c&&i(g.ticks),d&&i(g.minorTicks),h&&e.times(b,function(t){r.moveTo(0,0),r.lineTo(Math.cos(t*w+M)*y,Math.sin(t*w+M)*y)}),r.stroke()}else r.translate(this.plotOffset.left,this.plotOffset.top),l.backgroundColor&&(r.fillStyle=this.processColor(l.backgroundColor,{x1:0,y1:0,x2:p,y2:f}),r.fillRect(0,0,p,f)),r.beginPath(),g=this.axes.x,h&&n(g.ticks,o),u&&n(g.minorTicks,o),g=this.axes.y,c&&n(g.ticks,s),d&&n(g.minorTicks,s),r.stroke();r.restore(),(h||u||c||d)&&t.fire(this.el,"flotr:aftergrid",[this.axes.x,this.axes.y,a,this])},drawOutline:function(){var t=this,e=t.options,n=e.grid,o=n.outline,s=t.ctx,r=n.backgroundImage,a=t.plotOffset,l=a.left,h=a.top,c=t.plotWidth,u=t.plotHeight,d,f,p,g,m,x;if(n.outlineWidth){if(s.save(),n.circular){s.translate(l+c/2,h+u/2);var v=Math.min(u,c)*e.radar.radiusRatio/2,y=this.axes.x.ticks.length,b=2*(Math.PI/y),w=-Math.PI/2;for(s.beginPath(),s.lineWidth=n.outlineWidth,s.strokeStyle=n.color,s.lineJoin="round",i=0;y>=i;++i)s[0===i?"moveTo":"lineTo"](Math.cos(i*b+w)*v,Math.sin(i*b+w)*v);s.stroke()}else{s.translate(l,h);var M=n.outlineWidth,k=.5-M+(M+1)%2/2,S="lineTo",T="moveTo";s.lineWidth=M,s.strokeStyle=n.color,s.lineJoin="miter",s.beginPath(),s.moveTo(k,k),c-=M/2%1,u+=M/2,s[-1!==o.indexOf("n")?S:T](c,k),s[-1!==o.indexOf("e")?S:T](c,u),s[-1!==o.indexOf("s")?S:T](k,u),s[-1!==o.indexOf("w")?S:T](k,k),s.stroke(),s.closePath()}s.restore(),r&&(p=r.src||r,g=(parseInt(r.left,10)||0)+a.left,m=(parseInt(r.top,10)||0)+a.top,f=new Image,f.onload=function(){s.save(),r.alpha&&(s.globalAlpha=r.alpha),s.globalCompositeOperation="destination-over",s.drawImage(f,0,0,f.width,f.height,g,m,c,u),s.restore()},f.src=p)}}})}(),function(){var t=Flotr.DOM,e=Flotr._,i=Flotr,n="opacity:0.7;background-color:#000;color:#fff;position:absolute;padding:2px 8px;-moz-border-radius:4px;border-radius:4px;white-space:nowrap;";Flotr.addPlugin("hit",{callbacks:{"flotr:mousemove":function(t,e){this.hit.track(e)},"flotr:click":function(t){var i=this.hit.track(t);i&&!e.isUndefined(i.index)&&(t.hit=i)},"flotr:mouseout":function(t){t.relatedTarget!==this.mouseTrack&&this.hit.clearHit()},"flotr:destroy":function(){this.options.mouse.container&&t.remove(this.mouseTrack),this.mouseTrack=null}},track:function(t){return this.options.mouse.track||e.any(this.series,function(t){return t.mouse&&t.mouse.track})?this.hit.hit(t):void 0},executeOnType:function(t,n,o){function s(t,s){e.each(e.keys(i.graphTypes),function(e){t[e]&&t[e].show&&!t.hide&&this[e][n]&&(a=this.getOptions(t,e),a.fill=!!t.mouse.fillColor,a.fillStyle=this.processColor(t.mouse.fillColor||"#ffffff",{opacity:t.mouse.fillOpacity}),a.color=t.mouse.lineColor,a.context=this.octx,a.index=s,o&&(a.args=o),this[e][n].call(this[e],a),r=!0)},this)}var r=!1,a;return e.isArray(t)||(t=[t]),e.each(t,s,this),r},drawHit:function(t){var e=this.octx,i=t.series;if(i.mouse.lineColor){if(e.save(),e.lineWidth=i.points?i.points.lineWidth:1,e.strokeStyle=i.mouse.lineColor,e.fillStyle=this.processColor(i.mouse.fillColor||"#ffffff",{opacity:i.mouse.fillOpacity}),e.translate(this.plotOffset.left,this.plotOffset.top),!this.hit.executeOnType(i,"drawHit",t)){var n=t.xaxis,o=t.yaxis;e.beginPath(),e.arc(n.d2p(t.x),o.d2p(t.y),i.points.hitRadius||i.points.radius||i.mouse.radius,0,2*Math.PI,!0),e.fill(),e.stroke(),e.closePath()}e.restore(),this.clip(e)}this.prevHit=t},clearHit:function(){var e=this.prevHit,i=this.octx,n=this.plotOffset;if(i.save(),i.translate(n.left,n.top),e){if(!this.hit.executeOnType(e.series,"clearHit",this.prevHit)){var o=e.series,s=o.points?o.points.lineWidth:1;offset=(o.points.hitRadius||o.points.radius||o.mouse.radius)+s,i.clearRect(e.xaxis.d2p(e.x)-offset,e.yaxis.d2p(e.y)-offset,2*offset,2*offset)}t.hide(this.mouseTrack),this.prevHit=null}i.restore()},hit:function(t){var i=this.options,n=this.prevHit,o,s,r,a,l,h,c,u,d;if(0!==this.series.length)return d={relX:t.relX,relY:t.relY,absX:t.absX,absY:t.absY,series:this.series},i.mouse.trackY&&!i.mouse.trackAll&&this.hit.executeOnType(this.series,"hit",[t,d])&&!e.isUndefined(d.seriesIndex)?(l=this.series[d.seriesIndex],d.series=l,d.mouse=l.mouse,d.xaxis=l.xaxis,d.yaxis=l.yaxis):(o=this.hit.closest(t),o&&(o=i.mouse.trackY?o.point:o.x,a=o.seriesIndex,l=this.series[a],c=l.xaxis,u=l.yaxis,s=2*l.mouse.sensibility,(i.mouse.trackAll||o.distanceX<s/c.scale&&(!i.mouse.trackY||o.distanceY<s/u.scale))&&(d.series=l,d.xaxis=l.xaxis,d.yaxis=l.yaxis,d.mouse=l.mouse,d.x=o.x,d.y=o.y,d.dist=o.distance,d.index=o.dataIndex,d.seriesIndex=a))),n&&n.index===d.index&&n.seriesIndex===d.seriesIndex||(this.hit.clearHit(),d.series&&d.mouse&&d.mouse.track&&(this.hit.drawMouseTrack(d),this.hit.drawHit(d),Flotr.EventAdapter.fire(this.el,"flotr:hit",[d,this]))),d},closest:function(t){function e(t){t.distance=f,t.distanceX=p,t.distanceY=g,t.seriesIndex=b,t.dataIndex=w,t.x=v,t.y=y,c=!0}var i=this.series,n=this.options,o=t.relX,s=t.relY,r=Number.MAX_VALUE,a=Number.MAX_VALUE,l={},h={},c=!1,u,d,f,p,g,m,x,v,y,b,w;for(b=0;b<i.length;b++)if(u=i[b],d=u.data,m=u.xaxis.p2d(o),x=u.yaxis.p2d(s),!u.hide)for(w=d.length;w--;)v=d[w][0],y=d[w][1],d[w].y0&&(y+=d[w].y0),null!==v&&null!==y&&(v<u.xaxis.min||v>u.xaxis.max||(p=Math.abs(v-m),g=Math.abs(y-x),f=p*p+g*g,r>f&&(r=f,e(l)),a>p&&(a=p,e(h))));return c?{point:l,x:h}:!1},drawMouseTrack:function(i){var o="",s=i.series,r=i.mouse.position,a=i.mouse.margin,l=i.x,h=i.y,c=n,u=this.mouseTrack,d=this.plotOffset,f=d.left,p=d.right,g=d.bottom,m=d.top,x=i.mouse.trackDecimals,v=this.options,y=v.mouse.container,b=0,w=0,M,k,S;if(u||(u=t.node('<div class="flotr-mouse-value" style="'+c+'"></div>'),this.mouseTrack=u,t.insert(y||this.el,u)),(!x||0>x)&&(x=0),l&&l.toFixed&&(l=l.toFixed(x)),h&&h.toFixed&&(h=h.toFixed(x)),S=i.mouse.trackFormatter({x:l,y:h,series:i.series,index:i.index,nearest:i,fraction:i.fraction}),e.isNull(S)||e.isUndefined(S))return void t.hide(u);if(u.innerHTML=S,t.show(u),r){if(k=t.size(u),y&&(M=t.position(this.el),b=M.top,w=M.left),i.mouse.relative)if(s.pie&&s.pie.show){var T={x:this.plotWidth/2,y:this.plotHeight/2},F=Math.min(this.canvasWidth,this.canvasHeight)*s.pie.sizeRatio/2,A=i.sAngle<i.eAngle?(i.sAngle+i.eAngle)/2:(i.sAngle+i.eAngle+2*Math.PI)/2;o+="bottom:"+(a-m-T.y-Math.sin(A)*F/2+this.canvasHeight)+"px;top:auto;",o+="left:"+(a+f+T.x+Math.cos(A)*F/2)+"px;right:auto;"}else o+="top:",o+=/n/.test(r)?b-a+m+i.yaxis.d2p(i.y)-k.height:b+a+m+i.yaxis.d2p(i.y),o+="px;bottom:auto;left:",o+=/w/.test(r)?w-a+f+i.xaxis.d2p(i.x)-k.width:w+a+f+i.xaxis.d2p(i.x),o+="px;right:auto;";else o+="top:","n"==r.charAt(0)?o+=b+a+m:"s"==r.charAt(0)&&(o+=b-a+m+this.plotHeight-k.height),o+="px;bottom:auto;left:","e"==r.charAt(1)?o+=w-a+f+this.plotWidth-k.width:"w"==r.charAt(1)&&(o+=w+a+f),o+="px;right:auto;";u.style.cssText=c+o,i.mouse.relative&&(/[ew]/.test(r)?/[ns]/.test(r)||(u.style.top=b+m+i.yaxis.d2p(i.y)-t.size(u).height/2+"px"):u.style.left=w+f+i.xaxis.d2p(i.x)-t.size(u).width/2+"px")}}})}(),function(){function t(t,e){return t.which?1===t.which:0===t.button||1===t.button}function e(t,e){return Math.min(Math.max(0,t),e.plotWidth-1)}function i(t,e){return Math.min(Math.max(0,t),e.plotHeight)}var n=Flotr.DOM,o=Flotr.EventAdapter,s=Flotr._;Flotr.addPlugin("selection",{options:{pinchOnly:null,mode:null,color:"#B6D9FF",fps:20},callbacks:{"flotr:mouseup":function(t){var e=this.options.selection,i=this.selection,n=this.getEventPosition(t);e&&e.mode&&(i.interval&&clearInterval(i.interval),this.multitouches?i.updateSelection():e.pinchOnly||i.setSelectionPos(i.selection.second,n),i.clearSelection(),i.selecting&&i.selectionIsSane()&&(i.drawSelection(),i.fireSelectEvent(),this.ignoreClick=!0))},"flotr:mousedown":function(e){var i=this.options.selection,n=this.selection,o=this.getEventPosition(e);i&&i.mode&&(!i.mode||!t(e)&&s.isUndefined(e.touches)||(i.pinchOnly||n.setSelectionPos(n.selection.first,o),n.interval&&clearInterval(n.interval),this.lastMousePos.pageX=null,n.selecting=!1,n.interval=setInterval(s.bind(n.updateSelection,this),1e3/i.fps)))},"flotr:destroy":function(t){clearInterval(this.selection.interval)}},getArea:function(){var t=this.selection.selection,e=this.axes,i=t.first,n=t.second,o,s,r,a;return o=e.x.p2d(t.first.x),s=e.x.p2d(t.second.x),r=e.y.p2d(t.first.y),a=e.y.p2d(t.second.y),{x1:Math.min(o,s),y1:Math.min(r,a),x2:Math.max(o,s),y2:Math.max(r,a),xfirst:o,xsecond:s,yfirst:r,ysecond:a}},selection:{first:{x:-1,y:-1},second:{x:-1,y:-1}},prevSelection:null,interval:null,fireSelectEvent:function(t){var e=this.selection.getArea();t=t||"select",e.selection=this.selection.selection,o.fire(this.el,"flotr:"+t,[e,this])},setSelection:function(t,n){var o=this.options,s=this.axes.x,r=this.axes.y,a=r.scale,l=s.scale,h=-1!=o.selection.mode.indexOf("x"),c=-1!=o.selection.mode.indexOf("y"),u=this.selection.selection;this.selection.clearSelection(),u.first.y=i(h&&!c?0:(r.max-t.y1)*a,this),u.second.y=i(h&&!c?this.plotHeight-1:(r.max-t.y2)*a,this),u.first.x=e(c&&!h?0:(t.x1-s.min)*l,this),u.second.x=e(c&&!h?this.plotWidth:(t.x2-s.min)*l,this),this.selection.drawSelection(),n||this.selection.fireSelectEvent()},setSelectionPos:function(t,n){var o=this.options.selection.mode,s=this.selection.selection;t.x=-1==o.indexOf("x")?t==s.first?0:this.plotWidth:e(n.relX,this),t.y=-1==o.indexOf("y")?t==s.first?0:this.plotHeight-1:i(n.relY,this)},drawSelection:function(){this.selection.fireSelectEvent("selecting");var t=this.selection.selection,e=this.octx,i=this.options,n=this.plotOffset,o=this.selection.prevSelection;if(!o||t.first.x!=o.first.x||t.first.y!=o.first.y||t.second.x!=o.second.x||t.second.y!=o.second.y){e.save(),e.strokeStyle=this.processColor(i.selection.color,{opacity:.8}),e.lineWidth=1,e.lineJoin="miter",e.fillStyle=this.processColor(i.selection.color,{opacity:.4}),this.selection.prevSelection={first:{x:t.first.x,y:t.first.y},second:{x:t.second.x,y:t.second.y}};var s=Math.min(t.first.x,t.second.x),r=Math.min(t.first.y,t.second.y),a=Math.abs(t.second.x-t.first.x),l=Math.abs(t.second.y-t.first.y);e.fillRect(s+n.left+.5,r+n.top+.5,a,l),e.strokeRect(s+n.left+.5,r+n.top+.5,a,l),e.restore()}},updateSelection:function(){if(this.lastMousePos.pageX){if(this.selection.selecting=!0,this.multitouches)this.selection.setSelectionPos(this.selection.selection.first,this.getEventPosition(this.multitouches[0])),this.selection.setSelectionPos(this.selection.selection.second,this.getEventPosition(this.multitouches[1]));else{if(this.options.selection.pinchOnly)return;this.selection.setSelectionPos(this.selection.selection.second,this.lastMousePos)}this.selection.clearSelection(),this.selection.selectionIsSane()&&this.selection.drawSelection()}},clearSelection:function(){if(this.selection.prevSelection){var t=this.selection.prevSelection,e=1,i=this.plotOffset,n=Math.min(t.first.x,t.second.x),o=Math.min(t.first.y,t.second.y),s=Math.abs(t.second.x-t.first.x),r=Math.abs(t.second.y-t.first.y);this.octx.clearRect(n+i.left-e+.5,o+i.top-e,s+2*e+.5,r+2*e+.5),this.selection.prevSelection=null}},selectionIsSane:function(){var t=this.selection.selection;return Math.abs(t.second.x-t.first.x)>=5||Math.abs(t.second.y-t.first.y)>=5}})}(),function(){var t=Flotr.DOM;Flotr.addPlugin("labels",{callbacks:{"flotr:afterdraw":function(){this.labels.draw()}},draw:function(){function e(t,e,i){var n=i?e.minorTicks:e.ticks,o=1===e.orientation,r=1===e.n,a,l;for(a={color:e.options.color||v.grid.color,angle:Flotr.toRad(e.options.labelsAngle),textBaseline:"middle"},p=0;p<n.length&&(i?e.options.showMinorLabels:e.options.showLabels);++p)s=n[p],s.label+="",s.label&&s.label.length&&(x=Math.cos(p*u+d)*h,y=Math.sin(p*u+d)*h,a.textAlign=o?Math.abs(x)<.1?"center":0>x?"right":"left":"left",Flotr.drawText(b,s.label,o?x:3,o?y:-(e.ticks[p].v/e.max)*(h-v.fontSize),a))}function i(t,e,i,n){function o(t){return t.options.showLabels&&t.used}function r(t,e,i,n){return t.plotOffset.left+(e?n:i?-v.grid.labelMargin:v.grid.labelMargin+t.plotWidth)}function a(t,e,i,n){return t.plotOffset.top+(e?v.grid.labelMargin:n)+(e&&i?t.plotHeight:0)}var l=1===e.orientation,h=1===e.n,c,u;for(c={color:e.options.color||v.grid.color,textAlign:i,textBaseline:n,angle:Flotr.toRad(e.options.labelsAngle)},c=Flotr.getBestTextAlign(c.angle,c),p=0;p<e.ticks.length&&o(e);++p)s=e.ticks[p],s.label&&s.label.length&&(u=e.d2p(s.v),0>u||u>(l?t.plotWidth:t.plotHeight)||(Flotr.drawText(b,s.label,r(t,l,h,u),a(t,l,h,u),c),l||h||(b.save(),b.strokeStyle=c.color,b.beginPath(),b.moveTo(t.plotOffset.left+t.plotWidth-8,t.plotOffset.top+e.d2p(s.v)),b.lineTo(t.plotOffset.left+t.plotWidth,t.plotOffset.top+e.d2p(s.v)),b.stroke(),b.restore())))}function n(t,e){var i=1===e.orientation,n=1===e.n,o="",r,a,h,c=t.plotOffset;if(i||n||(b.save(),b.strokeStyle=e.options.color||v.grid.color,b.beginPath()),e.options.showLabels&&(n?!0:e.used))for(p=0;p<e.ticks.length;++p)s=e.ticks[p],!s.label||!s.label.length||(i?c.left:c.top)+e.d2p(s.v)<0||(i?c.left:c.top)+e.d2p(s.v)>(i?t.canvasWidth:t.canvasHeight)||(h=c.top+(i?(n?1:-1)*(t.plotHeight+v.grid.labelMargin):e.d2p(s.v)-e.maxLabel.height/2),r=i?c.left+e.d2p(s.v)-l/2:0,o="",0===p?o=" first":p===e.ticks.length-1&&(o=" last"),o+=i?" flotr-grid-label-x":" flotr-grid-label-y",g+=['<div style="position:absolute; text-align:'+(i?"center":"right")+"; ","top:"+h+"px; ",(i||n?"left:":"right:")+r+"px; ","width:"+(i?l:(n?c.left:c.right)-v.grid.labelMargin)+"px; ",e.options.color?"color:"+e.options.color+"; ":" ",'" class="flotr-grid-label'+o+'">'+s.label+"</div>"].join(" "),i||n||(b.moveTo(c.left+t.plotWidth-8,c.top+e.d2p(s.v)),b.lineTo(c.left+t.plotWidth,c.top+e.d2p(s.v))))}var o,s,r,a,l,h,c,u,d,f,p,g="",m=0,v=this.options,b=this.ctx,w=this.axes,M={size:v.fontSize};for(p=0;p<w.x.ticks.length;++p)w.x.ticks[p].label&&++m;l=this.plotWidth/m,v.grid.circular&&(b.save(),b.translate(this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+this.plotHeight/2),h=this.plotHeight*v.radar.radiusRatio/2+v.fontSize,c=this.axes.x.ticks.length,u=2*(Math.PI/c),d=-Math.PI/2,e(this,w.x,!1),e(this,w.x,!0),e(this,w.y,!1),e(this,w.y,!0),b.restore()),!v.HtmlText&&this.textEnabled?(i(this,w.x,"center","top"),i(this,w.x2,"center","bottom"),i(this,w.y,"right","middle"),i(this,w.y2,"left","middle")):(w.x.options.showLabels||w.x2.options.showLabels||w.y.options.showLabels||w.y2.options.showLabels)&&!v.grid.circular&&(g="",n(this,w.x),n(this,w.x2),n(this,w.y),n(this,w.y2),b.stroke(),b.restore(),f=t.create("div"),t.setStyles(f,{fontSize:"smaller",color:v.grid.color}),f.className="flotr-labels",t.insert(this.el,f),t.insert(f,g))}})}(),function(){var t=Flotr.DOM,e=Flotr._;Flotr.addPlugin("legend",{options:{show:!0,noColumns:1,labelFormatter:function(t){return t},labelBoxBorderColor:"#CCCCCC",labelBoxWidth:14,labelBoxHeight:10,labelBoxMargin:5,container:null,position:"nw",margin:5,backgroundColor:"#F0F0F0",backgroundOpacity:.85},callbacks:{"flotr:afterinit":function(){this.legend.insertLegend()},"flotr:destroy":function(){var e=this.legend.markup;e&&(this.legend.markup=null,t.remove(e))}},insertLegend:function(){if(this.options.legend.show){var i=this.series,n=this.plotOffset,o=this.options,s=o.legend,r=[],a=!1,l=this.ctx,h=e.filter(i,function(t){return t.label&&!t.hide}).length,c=s.position,u=s.margin,d=s.backgroundOpacity,f,p,g;if(h){var m=s.labelBoxWidth,x=s.labelBoxHeight,v=s.labelBoxMargin,y=n.left+u,b=n.top+u,w=0,M={size:1.1*o.fontSize,color:o.grid.color};for(f=i.length-1;f>-1;--f)i[f].label&&!i[f].hide&&(p=s.labelFormatter(i[f].label),w=Math.max(w,this._text.measureText(p,M).width));var k=Math.round(m+3*v+w),S=Math.round(h*(v+x)+v);if(d||0===d||(d=.1),o.HtmlText||!this.textEnabled||s.container){for(f=0;f<i.length;++f)if(i[f].label&&!i[f].hide){f%s.noColumns===0&&(r.push(a?"</tr><tr>":"<tr>"),a=!0);var T=i[f],F=s.labelBoxWidth,A=s.labelBoxHeight;p=s.labelFormatter(T.label),g="background-color:"+(T.bars&&T.bars.show&&T.bars.fillColor&&T.bars.fill?T.bars.fillColor:T.color)+";",r.push('<td class="flotr-legend-color-box">','<div style="border:1px solid ',s.labelBoxBorderColor,';padding:1px">','<div style="width:',F-1,"px;height:",A-1,"px;border:1px solid ",i[f].color,'">','<div style="width:',F,"px;height:",A,"px;",g,'"></div>',"</div>","</div>","</td>",'<td class="flotr-legend-label">',p,"</td>")}if(a&&r.push("</tr>"),r.length>0){var O='<table style="font-size:smaller;color:'+o.grid.color+'">'+r.join("")+"</table>";if(s.container)O=t.node(O),this.legend.markup=O,t.insert(s.container,O);else{var C={position:"absolute",zIndex:"2",border:"1px solid "+s.labelBoxBorderColor};"n"==c.charAt(0)?(C.top=u+n.top+"px",C.bottom="auto"):"c"==c.charAt(0)?(C.top=u+(this.plotHeight-S)/2+"px",C.bottom="auto"):"s"==c.charAt(0)&&(C.bottom=u+n.bottom+"px",C.top="auto"),"e"==c.charAt(1)?(C.right=u+n.right+"px",C.left="auto"):"w"==c.charAt(1)&&(C.left=u+n.left+"px",C.right="auto");var W=t.create("div"),z;if(W.className="flotr-legend",t.setStyles(W,C),t.insert(W,O),t.insert(this.el,W),!d)return;var I=s.backgroundColor||o.grid.backgroundColor||"#ffffff";e.extend(C,t.size(W),{backgroundColor:I,zIndex:"",border:""}),C.width+="px",C.height+="px",W=t.create("div"),W.className="flotr-legend-bg",t.setStyles(W,C),t.opacity(W,d),t.insert(W," "),t.insert(this.el,W)}}}else{"s"==c.charAt(0)&&(b=n.top+this.plotHeight-(u+S)),"c"==c.charAt(0)&&(b=n.top+this.plotHeight/2-(u+S/2)),"e"==c.charAt(1)&&(y=n.left+this.plotWidth-(u+k)),g=this.processColor(s.backgroundColor,{opacity:d}),l.fillStyle=g,l.fillRect(y,b,k,S),l.strokeStyle=s.labelBoxBorderColor,l.strokeRect(Flotr.toPixel(y),Flotr.toPixel(b),k,S);var P=y+v,E=b+v;for(f=0;f<i.length;f++)i[f].label&&!i[f].hide&&(p=s.labelFormatter(i[f].label),l.fillStyle=i[f].color,l.fillRect(P,E,m-1,x-1),l.strokeStyle=s.labelBoxBorderColor,l.lineWidth=1,l.strokeRect(Math.ceil(P)-1.5,Math.ceil(E)-1.5,m+2,x+2),Flotr.drawText(l,p,P+m+v,E+x,M),E+=x+v)}}}}})}(),function(){function t(t){if(this.options.spreadsheet.tickFormatter)return this.options.spreadsheet.tickFormatter(t);var e=i.find(this.axes.x.ticks,function(e){return e.v==t});return e?e.label:t}var e=Flotr.DOM,i=Flotr._;Flotr.addPlugin("spreadsheet",{options:{show:!1,tabGraphLabel:"Graph",tabDataLabel:"Data",toolbarDownload:"Download CSV",toolbarSelectAll:"Select all",csvFileSeparator:",",decimalSeparator:".",tickFormatter:null,initialTab:"graph"},callbacks:{"flotr:afterconstruct":function(){if(this.options.spreadsheet.show){var t=this.spreadsheet,i=e.node('<div class="flotr-tabs-group" style="position:absolute;left:0px;width:'+this.canvasWidth+'px"></div>'),n=e.node('<div style="float:left" class="flotr-tab selected">'+this.options.spreadsheet.tabGraphLabel+"</div>"),o=e.node('<div style="float:left" class="flotr-tab">'+this.options.spreadsheet.tabDataLabel+"</div>"),s;t.tabsContainer=i,t.tabs={graph:n,data:o},e.insert(i,n),e.insert(i,o),e.insert(this.el,i),s=e.size(o).height+2,this.plotOffset.bottom+=s,e.setStyles(i,{top:this.canvasHeight-s+"px"}),this.observe(n,"click",function(){t.showTab("graph")}).observe(o,"click",function(){t.showTab("data")}),"graph"!==this.options.spreadsheet.initialTab&&t.showTab(this.options.spreadsheet.initialTab)}}},loadDataGrid:function(){if(this.seriesData)return this.seriesData;var t=this.series,e={};return i.each(t,function(t,n){i.each(t.data,function(t){var i=t[0],o=t[1],s=e[i];if(s)s[n+1]=o;else{var r=[];r[0]=i,r[n+1]=o,e[i]=r}})}),this.seriesData=i.sortBy(e,function(t,e){return parseInt(e,10)}),this.seriesData},constructDataGrid:function(){if(this.spreadsheet.datagrid)return this.spreadsheet.datagrid;var n=this.series,o=this.spreadsheet.loadDataGrid(),s=["<colgroup><col />"],r,a,l,h=['<table class="flotr-datagrid"><tr class="first-row">'];h.push("<th>&nbsp;</th>"),i.each(n,function(t,e){h.push('<th scope="col">'+(t.label||String.fromCharCode(65+e))+"</th>"),s.push("<col />")}),h.push("</tr>"),i.each(o,function(e){h.push("<tr>"),i.times(n.length+1,function(n){var o="td",s=e[n],r=i.isUndefined(s)?"":Math.round(1e5*s)/1e5;if(0===n){o="th";var a=t.call(this,r);a&&(r=a)}h.push("<"+o+("th"==o?' scope="row"':"")+">"+r+"</"+o+">")},this),h.push("</tr>")},this),s.push("</colgroup>"),l=e.node(h.join("")),r=e.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarDownload+"</button>"),a=e.node('<button type="button" class="flotr-datagrid-toolbar-button">'+this.options.spreadsheet.toolbarSelectAll+"</button>"),this.observe(r,"click",i.bind(this.spreadsheet.downloadCSV,this)).observe(a,"click",i.bind(this.spreadsheet.selectAllData,this));var c=e.node('<div class="flotr-datagrid-toolbar"></div>');e.insert(c,r),e.insert(c,a);var u=this.canvasHeight-e.size(this.spreadsheet.tabsContainer).height-2,d=e.node('<div class="flotr-datagrid-container" style="position:absolute;left:0px;top:0px;width:'+this.canvasWidth+"px;height:"+u+'px;overflow:auto;z-index:10"></div>');return e.insert(d,c),e.insert(d,l),e.insert(this.el,d),this.spreadsheet.datagrid=l,this.spreadsheet.container=d,l},showTab:function(t){if(this.spreadsheet.activeTab!==t){switch(t){case"graph":e.hide(this.spreadsheet.container),e.removeClass(this.spreadsheet.tabs.data,"selected"),e.addClass(this.spreadsheet.tabs.graph,"selected");break;case"data":this.spreadsheet.datagrid||this.spreadsheet.constructDataGrid(),e.show(this.spreadsheet.container),e.addClass(this.spreadsheet.tabs.data,"selected"),e.removeClass(this.spreadsheet.tabs.graph,"selected");break;default:throw"Illegal tab name: "+t}this.spreadsheet.activeTab=t}},selectAllData:function(){if(this.spreadsheet.tabs){var t,e,i,n,o=this.spreadsheet.constructDataGrid();return this.spreadsheet.showTab("data"),setTimeout(function(){(i=o.ownerDocument)&&(n=i.defaultView)&&n.getSelection&&i.createRange&&(t=window.getSelection())&&t.removeAllRanges?(e=i.createRange(),e.selectNode(o),t.removeAllRanges(),t.addRange(e)):document.body&&document.body.createTextRange&&(e=document.body.createTextRange())&&(e.moveToElementText(o),e.select())},0),!0}return!1},downloadCSV:function(){var e="",n=this.series,o=this.options,s=this.spreadsheet.loadDataGrid(),r=encodeURIComponent(o.spreadsheet.csvFileSeparator);if(o.spreadsheet.decimalSeparator===o.spreadsheet.csvFileSeparator)throw"The decimal separator is the same as the column separator ("+o.spreadsheet.decimalSeparator+")";i.each(n,function(t,i){e+=r+'"'+(t.label||String.fromCharCode(65+i)).replace(/\"/g,'\\"')+'"'}),e+="%0D%0A",e+=i.reduce(s,function(e,i){var n=t.call(this,i[0])||"";n='"'+(n+"").replace(/\"/g,'\\"')+'"';var s=i.slice(1).join(r);return"."!==o.spreadsheet.decimalSeparator&&(s=s.replace(/\./g,o.spreadsheet.decimalSeparator)),e+n+r+s+"%0D%0A"},"",this),Flotr.isIE&&Flotr.isIE<9?(e=e.replace(new RegExp(r,"g"),decodeURIComponent(r)).replace(/%0A/g,"\n").replace(/%0D/g,"\r"),window.open().document.write(e)):window.open("data:text/csv,"+e)}})}(),function(){var t=Flotr.DOM;Flotr.addPlugin("titles",{callbacks:{"flotr:afterdraw":function(){this.titles.drawTitles()}},drawTitles:function(){var e,i=this.options,n=i.grid.labelMargin,o=this.ctx,s=this.axes;if(!i.HtmlText&&this.textEnabled){var r={size:i.fontSize,color:i.grid.color,textAlign:"center"};i.subtitle&&Flotr.drawText(o,i.subtitle,this.plotOffset.left+this.plotWidth/2,this.titleHeight+this.subtitleHeight-2,r),r.weight=1.5,r.size*=1.5,i.title&&Flotr.drawText(o,i.title,this.plotOffset.left+this.plotWidth/2,this.titleHeight-2,r),r.weight=1.8,r.size*=.8,s.x.options.title&&s.x.used&&(r.textAlign=s.x.options.titleAlign||"center",r.textBaseline="top",r.angle=Flotr.toRad(s.x.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(o,s.x.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top+s.x.maxLabel.height+this.plotHeight+2*n,r)),s.x2.options.title&&s.x2.used&&(r.textAlign=s.x2.options.titleAlign||"center",r.textBaseline="bottom",r.angle=Flotr.toRad(s.x2.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(o,s.x2.options.title,this.plotOffset.left+this.plotWidth/2,this.plotOffset.top-s.x2.maxLabel.height-2*n,r)),s.y.options.title&&s.y.used&&(r.textAlign=s.y.options.titleAlign||"right",r.textBaseline="middle",r.angle=Flotr.toRad(s.y.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(o,s.y.options.title,this.plotOffset.left-s.y.maxLabel.width-2*n,this.plotOffset.top+this.plotHeight/2,r)),s.y2.options.title&&s.y2.used&&(r.textAlign=s.y2.options.titleAlign||"left",r.textBaseline="middle",r.angle=Flotr.toRad(s.y2.options.titleAngle),r=Flotr.getBestTextAlign(r.angle,r),Flotr.drawText(o,s.y2.options.title,this.plotOffset.left+this.plotWidth+s.y2.maxLabel.width+2*n,this.plotOffset.top+this.plotHeight/2,r))}else{e=[],i.title&&e.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;font-size:1em;font-weight:bold;text-align:center;width:",this.plotWidth,'px;" class="flotr-title">',i.title,"</div>"),i.subtitle&&e.push('<div style="position:absolute;top:',this.titleHeight,"px;left:",this.plotOffset.left,"px;font-size:smaller;text-align:center;width:",this.plotWidth,'px;" class="flotr-subtitle">',i.subtitle,"</div>"),e.push("</div>"),e.push('<div class="flotr-axis-title" style="font-weight:bold;">'),s.x.options.title&&s.x.used&&e.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight+i.grid.labelMargin+s.x.titleSize.height,"px;left:",this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",s.x.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x1">',s.x.options.title,"</div>"),s.x2.options.title&&s.x2.used&&e.push('<div style="position:absolute;top:0;left:',this.plotOffset.left,"px;width:",this.plotWidth,"px;text-align:",s.x2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-x2">',s.x2.options.title,"</div>"),s.y.options.title&&s.y.used&&e.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-s.y.titleSize.height/2,"px;left:0;text-align:",s.y.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y1">',s.y.options.title,"</div>"),s.y2.options.title&&s.y2.used&&e.push('<div style="position:absolute;top:',this.plotOffset.top+this.plotHeight/2-s.y.titleSize.height/2,"px;right:0;text-align:",s.y2.options.titleAlign,';" class="flotr-axis-title flotr-axis-title-y2">',s.y2.options.title,"</div>"),e=e.join("");
var a=t.create("div");t.setStyles({color:i.grid.color}),a.className="flotr-titles",t.insert(this.el,a),t.insert(a,e)}}})}();